<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mo'orea Coral CAFI Dataset - Cryptic Life Within the Reef</title>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,500;0,600;0,700;1,400&family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700;1,9..40,400&family=IBM+Plex+Mono:wght@400;500&display=swap" rel="stylesheet">
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://d3js.org/topojson.v3.min.js"></script>
    <style>
        :root {
            --ocean-deep: #06101a;
            --ocean-mid: #0c1f33;
            --ocean-light: #15304d;
            --coral-pink: #ff6b8a;
            --coral-orange: #ff9f7a;
            --biolum-cyan: #00f5d4;
            --biolum-blue: #00bbf9;
            --biolum-glow: rgba(0, 245, 212, 0.4);
            --sand-light: #f5e6d3;
            --sand-mid: #e8d4bc;
            --foam-white: #f8fafc;
            --text-light: #e2eaf2;
            --text-muted: #94a8bd;
            --text-secondary: #b0c4d8;
            --glass-bg: rgba(12, 31, 51, 0.7);
            --glass-border: rgba(0, 245, 212, 0.12);
            --transition-smooth: cubic-bezier(0.4, 0, 0.2, 1);
            --transition-bounce: cubic-bezier(0.34, 1.56, 0.64, 1);
            --font-display: 'Cormorant Garamond', Georgia, serif;
            --font-body: 'DM Sans', -apple-system, BlinkMacSystemFont, sans-serif;
            --font-mono: 'IBM Plex Mono', 'SF Mono', monospace;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: var(--font-body);
            line-height: 1.7;
            color: var(--text-light);
            background: var(--ocean-deep);
            min-height: 100vh;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            text-rendering: optimizeLegibility;
        }

        /* Underwater particle effect */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: radial-gradient(circle, rgba(0, 245, 212, 0.8) 0%, transparent 70%);
            border-radius: 50%;
            animation: float-particle linear infinite;
            opacity: 0;
        }

        @keyframes float-particle {
            0% {
                transform: translateY(100vh) translateX(0) scale(0);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-10vh) translateX(50px) scale(1.5);
                opacity: 0;
            }
        }

        /* Deep ocean gradient background */
        .ocean-gradient {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background:
                radial-gradient(ellipse at 20% 0%, rgba(0, 187, 249, 0.15) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 100%, rgba(255, 107, 138, 0.1) 0%, transparent 50%),
                radial-gradient(ellipse at 50% 50%, rgba(0, 245, 212, 0.05) 0%, transparent 70%),
                linear-gradient(180deg, var(--ocean-deep) 0%, var(--ocean-mid) 50%, var(--ocean-deep) 100%);
            z-index: 0;
        }

        /* Caustic light effect */
        .caustics {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 100%;
            background:
                url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.015' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
            opacity: 0.03;
            pointer-events: none;
            z-index: 1;
            animation: caustic-move 20s linear infinite;
        }

        @keyframes caustic-move {
            0%, 100% { transform: translateX(0) translateY(0); }
            50% { transform: translateX(-20px) translateY(-20px); }
        }

        /* Navigation */
        .nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            padding: 24px 48px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.5s var(--transition-smooth);
        }

        .nav.scrolled {
            background: rgba(6, 16, 26, 0.92);
            backdrop-filter: blur(24px) saturate(180%);
            -webkit-backdrop-filter: blur(24px) saturate(180%);
            padding: 16px 48px;
            border-bottom: 1px solid var(--glass-border);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.3);
        }

        .nav-logo {
            font-family: var(--font-display);
            font-size: 1.6em;
            font-weight: 600;
            color: var(--foam-white);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 14px;
            letter-spacing: -0.02em;
            transition: transform 0.3s var(--transition-smooth);
        }

        .nav-logo:hover {
            transform: translateX(4px);
        }

        .nav-logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--biolum-cyan) 0%, var(--biolum-blue) 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1em;
            box-shadow: 0 4px 16px var(--biolum-glow);
            transition: all 0.3s var(--transition-smooth);
        }

        .nav-logo:hover .nav-logo-icon {
            transform: rotate(-8deg) scale(1.05);
            box-shadow: 0 6px 24px var(--biolum-glow);
        }

        .nav-links {
            display: flex;
            gap: 6px;
            background: var(--glass-bg);
            padding: 6px;
            border-radius: 100px;
            border: 1px solid var(--glass-border);
            backdrop-filter: blur(12px);
        }

        .nav-link {
            color: var(--text-muted);
            text-decoration: none;
            padding: 10px 20px;
            border-radius: 100px;
            font-size: 0.88em;
            font-weight: 500;
            transition: all 0.3s var(--transition-smooth);
            border: 1px solid transparent;
            position: relative;
            letter-spacing: 0.01em;
        }

        .nav-link:hover {
            color: var(--foam-white);
            background: rgba(0, 245, 212, 0.12);
        }

        .nav-link.active {
            color: var(--ocean-deep);
            background: var(--biolum-cyan);
            font-weight: 600;
            box-shadow: 0 2px 12px var(--biolum-glow);
        }

        /* Mobile Menu Button */
        .nav-mobile-btn {
            display: none;
            width: 44px;
            height: 44px;
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            cursor: pointer;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 5px;
            transition: all 0.3s var(--transition-smooth);
        }

        .nav-mobile-btn span {
            width: 20px;
            height: 2px;
            background: var(--foam-white);
            border-radius: 2px;
            transition: all 0.3s var(--transition-smooth);
        }

        .nav-mobile-btn:hover {
            background: rgba(0, 245, 212, 0.15);
            border-color: rgba(0, 245, 212, 0.3);
        }

        .nav-mobile-btn.active span:nth-child(1) {
            transform: rotate(45deg) translate(5px, 5px);
        }
        .nav-mobile-btn.active span:nth-child(2) {
            opacity: 0;
        }
        .nav-mobile-btn.active span:nth-child(3) {
            transform: rotate(-45deg) translate(5px, -5px);
        }

        /* Hero Section */
        .hero {
            position: relative;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 140px 48px 100px;
            text-align: center;
            z-index: 2;
        }

        .hero-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            padding: 10px 24px;
            border-radius: 100px;
            font-size: 0.82em;
            font-weight: 500;
            color: var(--biolum-cyan);
            margin-bottom: 36px;
            animation: fade-in-up 0.8s var(--transition-smooth) forwards;
            animation-delay: 0.2s;
            opacity: 0;
            letter-spacing: 0.08em;
            text-transform: uppercase;
            backdrop-filter: blur(12px);
        }

        .hero-badge::before {
            content: '';
            width: 8px;
            height: 8px;
            background: var(--biolum-cyan);
            border-radius: 50%;
            animation: pulse-glow 2s ease infinite;
            box-shadow: 0 0 12px var(--biolum-glow);
        }

        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 0 0 rgba(0, 245, 212, 0.6); transform: scale(1); }
            50% { box-shadow: 0 0 0 10px rgba(0, 245, 212, 0); transform: scale(1.1); }
        }

        .hero-title {
            font-family: var(--font-display);
            font-size: clamp(3.2em, 9vw, 6.5em);
            font-weight: 600;
            line-height: 1.05;
            margin-bottom: 28px;
            background: linear-gradient(135deg, var(--foam-white) 0%, #c9dae8 40%, var(--biolum-cyan) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: fade-in-up 0.9s var(--transition-smooth) forwards;
            animation-delay: 0.35s;
            opacity: 0;
            letter-spacing: -0.02em;
        }

        .hero-subtitle {
            font-size: 1.3em;
            color: var(--text-secondary);
            max-width: 640px;
            margin-bottom: 28px;
            font-weight: 400;
            animation: fade-in-up 0.9s var(--transition-smooth) forwards;
            animation-delay: 0.55s;
            opacity: 0;
            line-height: 1.7;
            text-wrap: balance;
        }

        .hero-subtitle em {
            color: var(--coral-pink);
            font-style: italic;
            font-family: var(--font-display);
        }

        .hero-meta {
            font-size: 0.92em;
            color: var(--text-muted);
            margin-bottom: 44px;
            animation: fade-in-up 0.9s var(--transition-smooth) forwards;
            animation-delay: 0.7s;
            opacity: 0;
            line-height: 1.8;
        }

        .hero-meta strong {
            color: var(--foam-white);
            font-weight: 500;
        }

        @keyframes fade-in-up {
            from {
                opacity: 0;
                transform: translateY(40px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Stats row */
        .hero-stats {
            display: flex;
            gap: 48px;
            flex-wrap: wrap;
            justify-content: center;
            margin-bottom: 52px;
            animation: fade-in-up 0.9s var(--transition-smooth) forwards;
            animation-delay: 0.85s;
            opacity: 0;
        }

        .hero-stat {
            text-align: center;
            position: relative;
            padding: 0 20px;
        }

        .hero-stat:not(:last-child)::after {
            content: '';
            position: absolute;
            right: -24px;
            top: 50%;
            transform: translateY(-50%);
            width: 1px;
            height: 40px;
            background: linear-gradient(180deg, transparent, var(--glass-border), transparent);
        }

        .hero-stat-number {
            font-family: var(--font-mono);
            font-size: 2.4em;
            font-weight: 500;
            color: var(--foam-white);
            line-height: 1;
            letter-spacing: -0.01em;
            position: relative;
        }

        .hero-stat-number::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 50%;
            transform: translateX(-50%);
            width: 24px;
            height: 2px;
            background: var(--biolum-cyan);
            border-radius: 1px;
        }

        .hero-stat-label {
            font-size: 0.75em;
            color: var(--text-muted);
            margin-top: 14px;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            font-weight: 500;
        }

        /* CTA buttons */
        .hero-cta {
            display: flex;
            gap: 16px;
            flex-wrap: wrap;
            justify-content: center;
            margin-bottom: 64px;
            animation: fade-in-up 0.9s var(--transition-smooth) forwards;
            animation-delay: 1s;
            opacity: 0;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            gap: 12px;
            padding: 16px 36px;
            border-radius: 100px;
            font-size: 0.95em;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.4s var(--transition-smooth);
            cursor: pointer;
            border: none;
            font-family: inherit;
            letter-spacing: 0.02em;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s ease;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--biolum-cyan) 0%, var(--biolum-blue) 100%);
            color: var(--ocean-deep);
            box-shadow: 0 4px 24px var(--biolum-glow), inset 0 1px 0 rgba(255,255,255,0.2);
        }

        .btn-primary:hover {
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 12px 40px var(--biolum-glow);
        }

        .btn-primary:active {
            transform: translateY(-2px) scale(1);
        }

        .btn-secondary {
            background: var(--glass-bg);
            color: var(--foam-white);
            border: 1px solid var(--glass-border);
            backdrop-filter: blur(12px);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.25);
            transform: translateY(-2px);
        }

        /* Hero image */
        .hero-image-wrapper {
            width: 100%;
            max-width: 1100px;
            position: relative;
            animation: fade-in-up 1s var(--transition-smooth) forwards;
            animation-delay: 1.15s;
            opacity: 0;
        }

        .hero-image {
            width: 100%;
            height: 480px;
            object-fit: cover;
            border-radius: 20px;
            box-shadow:
                0 50px 100px rgba(0, 0, 0, 0.5),
                0 0 0 1px rgba(255, 255, 255, 0.08),
                inset 0 0 100px rgba(0, 245, 212, 0.08);
            transition: transform 0.6s var(--transition-smooth), box-shadow 0.6s var(--transition-smooth);
            cursor: pointer;
        }

        .hero-image:hover {
            transform: scale(1.01);
            box-shadow:
                0 60px 120px rgba(0, 0, 0, 0.55),
                0 0 0 1px rgba(255, 255, 255, 0.1),
                inset 0 0 100px rgba(0, 245, 212, 0.12);
            background: linear-gradient(135deg, var(--ocean-light) 0%, var(--ocean-mid) 100%);
        }

        /* Image error state fallback */
        img {
            background: linear-gradient(135deg, var(--ocean-light) 0%, var(--ocean-mid) 100%);
        }

        img[alt]::after {
            display: block;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            content: attr(alt);
            color: var(--text-muted);
            font-size: 0.9em;
            text-align: center;
        }

        .hero-image-caption {
            position: absolute;
            bottom: -16px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(10, 22, 40, 0.9);
            backdrop-filter: blur(10px);
            padding: 12px 24px;
            border-radius: 100px;
            font-size: 0.85em;
            color: var(--text-muted);
            border: 1px solid rgba(0, 245, 212, 0.2);
            white-space: nowrap;
        }

        /* Container */
        .container {
            max-width: 1440px;
            margin: 0 auto;
            padding: 0 48px;
            position: relative;
            z-index: 2;
        }

        /* Section Navigation Cards */
        .nav-cards {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
            padding: 60px 0 120px;
        }

        @media (max-width: 1200px) {
            .nav-cards {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (max-width: 900px) {
            .nav-cards {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 600px) {
            .nav-cards {
                grid-template-columns: 1fr;
            }
        }

        .nav-card {
            background: rgba(12, 31, 51, 0.5);
            border: 1px solid rgba(0, 245, 212, 0.08);
            border-radius: 12px;
            padding: 24px 22px;
            cursor: pointer;
            transition: all 0.4s var(--transition-smooth);
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(12px);
            display: flex;
            flex-direction: column;
            min-height: 160px;
        }

        .nav-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--biolum-cyan) 0%, var(--biolum-blue) 50%, var(--coral-pink) 100%);
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.5s var(--transition-smooth);
        }

        .nav-card::after {
            content: '';
            position: absolute;
            inset: 0;
            background: radial-gradient(600px circle at var(--mouse-x, 50%) var(--mouse-y, 50%), rgba(0, 245, 212, 0.06), transparent 40%);
            opacity: 0;
            transition: opacity 0.4s ease;
            pointer-events: none;
        }

        .nav-card:hover::before {
            transform: scaleX(1);
        }

        .nav-card:hover::after {
            opacity: 1;
        }

        .nav-card:hover {
            transform: translateY(-6px);
            border-color: rgba(0, 245, 212, 0.25);
            box-shadow:
                0 24px 48px rgba(0, 0, 0, 0.35),
                0 0 0 1px rgba(0, 245, 212, 0.1),
                0 0 80px rgba(0, 245, 212, 0.08);
        }

        .nav-card-icon {
            width: 40px;
            height: 40px;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
            background: rgba(0, 245, 212, 0.08);
            border: 1px solid rgba(0, 245, 212, 0.12);
            transition: all 0.4s var(--transition-smooth);
        }

        .nav-card-icon svg {
            width: 20px;
            height: 20px;
            stroke: var(--biolum-cyan);
            stroke-width: 1.5;
            fill: none;
            transition: transform 0.4s var(--transition-bounce);
        }

        .nav-card:hover .nav-card-icon {
            transform: scale(1.05);
            background: rgba(0, 245, 212, 0.15);
            border-color: rgba(0, 245, 212, 0.3);
            box-shadow: 0 2px 12px var(--biolum-glow);
        }

        .nav-card:hover .nav-card-icon svg {
            transform: scale(1.08);
        }

        .nav-card h3 {
            font-family: var(--font-body);
            font-size: 1em;
            font-weight: 600;
            color: var(--foam-white);
            margin-bottom: 6px;
            letter-spacing: 0;
        }

        .nav-card p {
            color: var(--text-muted);
            font-size: 0.85em;
            line-height: 1.45;
            flex-grow: 1;
        }

        .nav-card-arrow {
            position: absolute;
            bottom: 18px;
            right: 18px;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: rgba(0, 245, 212, 0.08);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--biolum-cyan);
            font-size: 0.85em;
            transition: all 0.3s ease;
            opacity: 0.5;
        }

        .nav-card:hover .nav-card-arrow {
            opacity: 1;
            transform: translateX(3px);
            background: rgba(0, 245, 212, 0.15);
        }

        /* Content Sections */
        .content-section {
            display: none;
            padding: 100px 0;
            animation: section-fade-in 0.6s ease forwards;
        }

        .content-section.active {
            display: block;
        }

        @keyframes section-fade-in {
            from {
                opacity: 0;
                transform: translateY(40px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .section-header {
            text-align: center;
            margin-bottom: 60px;
        }

        .section-label {
            display: inline-block;
            font-size: 0.85em;
            font-weight: 600;
            color: var(--biolum-cyan);
            text-transform: uppercase;
            letter-spacing: 0.15em;
            margin-bottom: 16px;
        }

        .section-title {
            font-family: var(--font-display);
            font-size: clamp(2.2em, 4.5vw, 3em);
            font-weight: 600;
            color: var(--foam-white);
            line-height: 1.15;
            letter-spacing: -0.02em;
        }

        .section-subtitle {
            font-size: 1.1em;
            color: var(--text-secondary);
            max-width: 600px;
            margin: 16px auto 0;
            line-height: 1.6;
        }

        /* Info Box */
        .info-box {
            background: rgba(0, 245, 212, 0.04);
            border: 1px solid rgba(0, 245, 212, 0.12);
            border-left: 3px solid var(--biolum-cyan);
            border-radius: 8px;
            padding: 20px 24px;
            margin-bottom: 32px;
        }

        .info-box-title {
            font-weight: 600;
            color: var(--biolum-cyan);
            margin-bottom: 6px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9em;
            text-transform: uppercase;
            letter-spacing: 0.04em;
        }

        .info-box p {
            color: var(--text-secondary);
            font-size: 0.95em;
            line-height: 1.6;
        }

        .info-box strong {
            color: var(--foam-white);
        }

        /* Focus states for accessibility */
        a:focus-visible,
        button:focus-visible {
            outline: 2px solid var(--biolum-cyan);
            outline-offset: 2px;
        }

        .nav-link:focus-visible,
        .btn:focus-visible {
            outline-offset: 4px;
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 24px;
            margin: 48px 0;
        }

        .stat-card {
            background: linear-gradient(135deg, rgba(15, 40, 71, 0.6) 0%, rgba(26, 64, 102, 0.4) 100%);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 16px;
            padding: 32px 24px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-4px);
            border-color: rgba(0, 245, 212, 0.2);
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.2);
        }

        .stat-card-number {
            font-family: var(--font-mono);
            font-size: 2.2em;
            font-weight: 500;
            color: var(--foam-white);
            line-height: 1;
            margin-bottom: 8px;
        }

        .stat-card-label {
            font-size: 0.9em;
            color: var(--text-muted);
        }

        /* Location Map Box */
        .location-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 40px 0;
        }

        .location-card {
            background: linear-gradient(135deg, rgba(255, 107, 138, 0.1) 0%, rgba(255, 140, 66, 0.05) 100%);
            border: 1px solid rgba(255, 107, 138, 0.2);
            border-radius: 16px;
            padding: 28px;
            text-align: center;
        }

        .location-card-title {
            font-weight: 600;
            color: var(--coral-pink);
            margin-bottom: 8px;
            font-size: 1.1em;
        }

        .location-card-value {
            color: var(--foam-white);
            font-size: 1.2em;
            font-family: 'JetBrains Mono', monospace;
        }

        /* Timeline */
        .timeline {
            position: relative;
            padding-left: 48px;
            margin: 48px 0;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 16px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: linear-gradient(180deg, var(--biolum-cyan) 0%, var(--coral-pink) 100%);
        }

        .timeline-item {
            position: relative;
            margin-bottom: 36px;
            padding-left: 24px;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -40px;
            top: 6px;
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background: var(--biolum-cyan);
            border: 3px solid var(--ocean-deep);
            box-shadow: 0 0 20px rgba(0, 245, 212, 0.5);
        }

        .timeline-item h4 {
            font-family: 'Playfair Display', serif;
            font-size: 1.3em;
            color: var(--foam-white);
            margin-bottom: 8px;
        }

        .timeline-item p {
            color: var(--text-muted);
            font-size: 1.05em;
        }

        /* Experiment Cards */
        .experiment-card {
            background: linear-gradient(135deg, var(--ocean-light) 0%, var(--ocean-mid) 100%);
            border-radius: 24px;
            padding: 48px;
            margin-bottom: 32px;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .experiment-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 6px;
            height: 100%;
            background: linear-gradient(180deg, var(--biolum-cyan) 0%, var(--biolum-blue) 100%);
        }

        .experiment-card.coral-theme::before {
            background: linear-gradient(180deg, var(--coral-pink) 0%, var(--coral-orange) 100%);
        }

        .experiment-card.sand-theme::before {
            background: linear-gradient(180deg, var(--sand-light) 0%, var(--sand-mid) 100%);
        }

        .experiment-card h3 {
            font-family: 'Playfair Display', serif;
            font-size: 1.8em;
            color: var(--foam-white);
            margin-bottom: 20px;
        }

        .experiment-card p {
            color: var(--text-light);
            font-size: 1.05em;
            margin-bottom: 12px;
        }

        .experiment-card strong {
            color: var(--biolum-cyan);
        }

        .experiment-card.coral-theme strong {
            color: var(--coral-pink);
        }

        .experiment-card.sand-theme strong {
            color: var(--sand-light);
        }

        .experiment-card ul {
            margin: 16px 0;
            padding-left: 20px;
        }

        .experiment-card li {
            color: var(--text-light);
            margin-bottom: 10px;
            font-size: 1.05em;
        }

        /* Photo Gallery */
        .photo-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(340px, 1fr));
            gap: 32px;
            margin: 48px 0;
        }

        .photo-card {
            background: rgba(15, 40, 71, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 20px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .photo-card:hover {
            transform: translateY(-8px);
            border-color: rgba(0, 245, 212, 0.3);
            box-shadow: 0 24px 48px rgba(0, 0, 0, 0.3);
        }

        .photo-card-image {
            position: relative;
            overflow: hidden;
        }

        .photo-card-image img {
            width: 100%;
            height: 260px;
            object-fit: cover;
            transition: transform 0.4s ease;
        }

        .photo-card:hover .photo-card-image img {
            transform: scale(1.05);
        }

        .photo-card-overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(0deg, rgba(10, 22, 40, 0.8) 0%, transparent 50%);
            opacity: 0;
            transition: opacity 0.3s ease;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            padding-bottom: 20px;
        }

        .photo-card:hover .photo-card-overlay {
            opacity: 1;
        }

        .photo-card-zoom {
            width: 50px;
            height: 50px;
            background: var(--biolum-cyan);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--ocean-deep);
            font-size: 1.2em;
            transform: translateY(20px);
            transition: transform 0.3s ease;
        }

        .photo-card:hover .photo-card-zoom {
            transform: translateY(0);
        }

        .photo-card-content {
            padding: 24px;
        }

        .photo-card h4 {
            font-family: 'Playfair Display', serif;
            font-size: 1.2em;
            color: var(--foam-white);
            margin-bottom: 8px;
        }

        .photo-card .species-name {
            color: var(--coral-pink);
            font-style: italic;
            font-size: 0.95em;
            margin-bottom: 10px;
            display: block;
        }

        .photo-card p {
            color: var(--text-muted);
            font-size: 0.95em;
            line-height: 1.6;
        }

        /* Taxa Grid */
        .taxa-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 20px;
            margin: 40px 0;
        }

        .taxa-item {
            background: linear-gradient(135deg, rgba(15, 40, 71, 0.6) 0%, rgba(26, 64, 102, 0.4) 100%);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 16px;
            padding: 24px 20px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .taxa-item:hover {
            transform: translateY(-4px);
            border-color: rgba(0, 245, 212, 0.3);
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.2);
        }

        .taxa-item-img {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            object-fit: cover;
            margin-bottom: 12px;
            border: 2px solid rgba(0, 245, 212, 0.3);
            transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .taxa-item:hover .taxa-item-img {
            transform: scale(1.15);
            border-color: var(--biolum-cyan);
            box-shadow: 0 0 20px rgba(0, 245, 212, 0.3);
        }

        .taxa-item-placeholder {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            margin-bottom: 12px;
            background: linear-gradient(135deg, rgba(0, 245, 212, 0.15) 0%, rgba(0, 187, 249, 0.1) 100%);
            border: 2px solid rgba(0, 245, 212, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Playfair Display', serif;
            font-size: 1.5em;
            font-weight: 600;
            color: var(--biolum-cyan);
            transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .taxa-item:hover .taxa-item-placeholder {
            transform: scale(1.15);
            border-color: var(--biolum-cyan);
            box-shadow: 0 0 20px rgba(0, 245, 212, 0.3);
        }

        .taxa-item-name {
            font-weight: 600;
            color: var(--foam-white);
            font-size: 1.05em;
            margin-bottom: 4px;
        }

        .taxa-item-count {
            color: var(--biolum-cyan);
            font-size: 0.9em;
            font-weight: 600;
        }

        .taxa-item-label {
            color: var(--text-muted);
            font-size: 0.8em;
            margin-top: 4px;
        }

        /* Data Table */
        .data-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin: 32px 0;
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid rgba(0, 245, 212, 0.1);
        }

        .data-table th,
        .data-table td {
            padding: 14px 18px;
            text-align: left;
            font-size: 0.9em;
        }

        .data-table th {
            background: rgba(21, 48, 77, 0.8);
            color: var(--foam-white);
            font-weight: 600;
            font-size: 0.8em;
            text-transform: uppercase;
            letter-spacing: 0.06em;
            border-bottom: 1px solid rgba(0, 245, 212, 0.15);
        }

        .data-table td {
            background: rgba(12, 31, 51, 0.5);
            color: var(--text-light);
            border-bottom: 1px solid rgba(255, 255, 255, 0.04);
            font-family: var(--font-mono);
            font-size: 0.85em;
        }

        .data-table tr:hover td {
            background: rgba(0, 245, 212, 0.06);
        }

        .data-table tr:last-child td {
            border-bottom: none;
        }

        .data-table td:first-child {
            font-family: var(--font-body);
            font-weight: 500;
            color: var(--foam-white);
        }

        /* File Card */
        .file-card {
            background: linear-gradient(135deg, rgba(15, 40, 71, 0.6) 0%, rgba(26, 64, 102, 0.4) 100%);
            border: 1px solid rgba(0, 245, 212, 0.2);
            border-left: 4px solid var(--biolum-cyan);
            border-radius: 12px;
            padding: 28px 32px;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .file-card:hover {
            transform: translateX(8px);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
        }

        .file-card h4 {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.1em;
            color: var(--biolum-cyan);
            margin-bottom: 8px;
        }

        .file-card .meta {
            color: var(--text-muted);
            font-size: 0.9em;
            margin-bottom: 12px;
            font-family: 'JetBrains Mono', monospace;
        }

        .file-card p {
            color: var(--text-light);
            font-size: 1em;
            margin-bottom: 8px;
        }

        .file-card code {
            background: rgba(0, 245, 212, 0.1);
            color: var(--biolum-cyan);
            padding: 3px 10px;
            border-radius: 6px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9em;
        }

        /* File Links */
        .file-link:hover {
            background: rgba(0, 245, 212, 0.15) !important;
            transform: translateX(4px);
            border-left: 3px solid var(--biolum-cyan);
        }

        .file-link code {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9em;
        }

        /* Code Block */
        pre {
            background: linear-gradient(135deg, rgba(10, 22, 40, 0.95) 0%, rgba(15, 40, 71, 0.9) 100%);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 28px 32px;
            overflow-x: auto;
            margin: 24px 0;
        }

        pre code {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9em;
            color: var(--text-light);
            line-height: 1.7;
            background: transparent;
            padding: 0;
        }

        /* Alert Box */
        .alert {
            border-radius: 16px;
            padding: 24px 28px;
            margin: 32px 0;
        }

        .alert-info {
            background: linear-gradient(135deg, rgba(0, 187, 249, 0.1) 0%, rgba(0, 245, 212, 0.05) 100%);
            border: 1px solid rgba(0, 187, 249, 0.2);
        }

        .alert-success {
            background: linear-gradient(135deg, rgba(0, 245, 212, 0.1) 0%, rgba(0, 187, 249, 0.05) 100%);
            border: 1px solid rgba(0, 245, 212, 0.2);
        }

        .alert-warning {
            background: linear-gradient(135deg, rgba(255, 140, 66, 0.1) 0%, rgba(255, 107, 138, 0.05) 100%);
            border: 1px solid rgba(255, 140, 66, 0.2);
        }

        .alert strong {
            color: var(--foam-white);
        }

        .alert p {
            color: var(--text-light);
            margin-top: 8px;
        }

        /* Back Button */
        .back-btn {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(0, 245, 212, 0.08);
            color: var(--biolum-cyan);
            border: 1px solid rgba(0, 245, 212, 0.2);
            padding: 14px 28px;
            border-radius: 100px;
            font-size: 0.9em;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s var(--transition-smooth);
            margin-top: 48px;
            font-family: inherit;
            letter-spacing: 0.02em;
        }

        .back-btn:hover {
            color: var(--ocean-deep);
            background: var(--biolum-cyan);
            border-color: var(--biolum-cyan);
            transform: translateX(-4px);
            box-shadow: 0 4px 20px var(--biolum-glow);
        }

        /* Quick Link Cards */
        .quick-link-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(0, 245, 212, 0.15);
        }

        /* Lightbox */
        .lightbox {
            display: none;
            position: fixed;
            inset: 0;
            z-index: 2000;
            background: rgba(10, 22, 40, 0.98);
            backdrop-filter: blur(20px);
            justify-content: center;
            align-items: center;
            animation: lightbox-fade-in 0.3s ease;
        }

        .lightbox.active {
            display: flex;
        }

        @keyframes lightbox-fade-in {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .lightbox img {
            max-width: 90%;
            max-height: 85%;
            border-radius: 16px;
            box-shadow: 0 40px 100px rgba(0, 0, 0, 0.5);
            animation: lightbox-zoom 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes lightbox-zoom {
            from {
                transform: scale(0.9);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        .lightbox-close {
            position: absolute;
            top: 30px;
            right: 40px;
            width: 56px;
            height: 56px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--foam-white);
            font-size: 1.5em;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .lightbox-close:hover {
            background: var(--coral-pink);
            border-color: var(--coral-pink);
            transform: rotate(90deg);
        }

        .lightbox-caption {
            position: absolute;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(10, 22, 40, 0.9);
            backdrop-filter: blur(10px);
            padding: 16px 32px;
            border-radius: 100px;
            color: var(--text-light);
            font-size: 1em;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Scroll to top */
        .scroll-top {
            position: fixed;
            bottom: 32px;
            right: 32px;
            width: 52px;
            height: 52px;
            background: linear-gradient(135deg, var(--biolum-cyan) 0%, var(--biolum-blue) 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--ocean-deep);
            font-size: 1.3em;
            cursor: pointer;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 999;
            box-shadow: 0 4px 20px rgba(0, 245, 212, 0.3);
        }

        .scroll-top.visible {
            opacity: 1;
            visibility: visible;
        }

        .scroll-top:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 30px rgba(0, 245, 212, 0.4);
        }

        /* Folder structure */
        .folder-tree {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9em;
            line-height: 1.8;
            color: var(--text-light);
        }

        .folder-tree .folder {
            color: var(--biolum-cyan);
        }

        .folder-tree .file {
            color: var(--text-muted);
        }

        .folder-tree .comment {
            color: var(--coral-pink);
        }

        /* Responsive */
        /* Responsive - Tablet */
        @media (max-width: 1024px) {
            .nav {
                padding: 20px 32px;
            }

            .nav.scrolled {
                padding: 14px 32px;
            }

            .nav-links {
                gap: 4px;
                padding: 5px;
            }

            .nav-link {
                padding: 8px 14px;
                font-size: 0.82em;
            }

            .hero {
                padding: 130px 32px 80px;
            }

            .hero-stats {
                gap: 32px;
            }

            .hero-stat:not(:last-child)::after {
                right: -16px;
            }

            .container {
                padding: 0 32px;
            }
        }

        /* Responsive - Mobile */
        @media (max-width: 768px) {
            .nav {
                padding: 16px 20px;
            }

            .nav.scrolled {
                padding: 12px 20px;
            }

            .nav-links {
                position: fixed;
                top: 0;
                right: -100%;
                width: 280px;
                height: 100vh;
                flex-direction: column;
                background: rgba(6, 16, 26, 0.98);
                backdrop-filter: blur(24px);
                padding: 100px 24px 40px;
                gap: 8px;
                border-radius: 0;
                border: none;
                border-left: 1px solid var(--glass-border);
                transition: right 0.4s var(--transition-smooth);
                z-index: 999;
            }

            .nav-links.active {
                right: 0;
            }

            .nav-link {
                padding: 14px 20px;
                border-radius: 12px;
                font-size: 0.95em;
                justify-content: flex-start;
            }

            .nav-mobile-btn {
                display: flex;
                z-index: 1001;
            }

            .hero {
                padding: 110px 20px 60px;
            }

            .hero-badge {
                font-size: 0.72em;
                padding: 8px 16px;
            }

            .hero-title {
                font-size: clamp(2.4em, 10vw, 3.5em);
            }

            .hero-subtitle {
                font-size: 1.1em;
            }

            .hero-stats {
                gap: 20px;
                flex-direction: column;
            }

            .hero-stat {
                padding: 0;
            }

            .hero-stat:not(:last-child)::after {
                display: none;
            }

            .hero-stat-number {
                font-size: 2.2em;
            }

            .hero-cta {
                flex-direction: column;
                width: 100%;
                max-width: 280px;
            }

            .btn {
                width: 100%;
                justify-content: center;
            }

            .hero-image {
                height: 280px;
                border-radius: 16px;
            }

            .container {
                padding: 0 20px;
            }

            .nav-cards {
                grid-template-columns: 1fr;
                gap: 16px;
                padding: 60px 0 100px;
            }

            .nav-card {
                padding: 24px 22px;
            }

            .nav-card-icon {
                width: 46px;
                height: 46px;
                margin-bottom: 16px;
            }

            .nav-card h3 {
                font-size: 1.2em;
            }

            .photo-gallery {
                grid-template-columns: 1fr;
            }

            .location-grid {
                grid-template-columns: 1fr;
            }

            .experiment-card {
                padding: 28px 22px;
            }

            .lightbox-close {
                top: 16px;
                right: 16px;
                width: 44px;
                height: 44px;
            }

            .section-title {
                font-size: 1.8em;
            }
        }

        /* Mobile overlay when menu is open */
        .mobile-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(4px);
            opacity: 0;
            visibility: hidden;
            transition: all 0.4s var(--transition-smooth);
            z-index: 998;
        }

        .mobile-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--ocean-deep);
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, var(--ocean-light) 0%, var(--ocean-mid) 100%);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, var(--biolum-cyan) 0%, var(--biolum-blue) 100%);
        }

        /* Selection styling */
        ::selection {
            background: rgba(0, 245, 212, 0.3);
            color: var(--foam-white);
        }
    </style>
</head>
<body>
    <!-- Background Effects -->
    <div class="ocean-gradient"></div>
    <div class="caustics"></div>
    <div class="particles" id="particles"></div>

    <!-- Navigation -->
    <nav class="nav" id="nav">
        <a href="#" class="nav-logo" onclick="showNav(); return false;">
            <span class="nav-logo-icon">~</span>
            Mo'orea CAFI
        </a>
        <div class="nav-links" id="navLinks">
            <a href="#" class="nav-link" onclick="showNav(); closeMobileMenu(); return false;">Home</a>
            <a href="#" class="nav-link" data-section="overview" onclick="showSection('overview'); closeMobileMenu(); return false;">Overview</a>
            <a href="#" class="nav-link" data-section="gallery" onclick="showSection('gallery'); closeMobileMenu(); return false;">Gallery</a>
            <a href="#" class="nav-link" data-section="experiments" onclick="showSection('experiments'); closeMobileMenu(); return false;">Studies</a>
            <a href="#" class="nav-link" data-section="organisms" onclick="showSection('organisms'); closeMobileMenu(); return false;">Species</a>
            <a href="#" class="nav-link" data-section="files" onclick="showSection('files'); closeMobileMenu(); return false;">Data</a>
            <a href="#" class="nav-link" data-section="getstarted" onclick="showSection('getstarted'); closeMobileMenu(); return false;">Get Started</a>
        </div>
        <button class="nav-mobile-btn" id="mobileMenuBtn" onclick="toggleMobileMenu()" aria-label="Toggle menu">
            <span></span>
            <span></span>
            <span></span>
        </button>
    </nav>
    <div class="mobile-overlay" id="mobileOverlay" onclick="closeMobileMenu()"></div>

    <!-- Hero Section -->
    <section class="hero" id="hero">
        <span class="hero-badge">NSF Ocean Sciences Research Dataset</span>

        <h1 class="hero-title">Cryptic Life<br>Within the Reef</h1>

        <p class="hero-subtitle">
            Documenting the hidden biodiversity of crabs, shrimp, and invertebrates living inside <em>Pocillopora</em> coral colonies on Mo'orea, French Polynesia
        </p>

        <p class="hero-meta">
            <strong>Principal Investigators:</strong> Adrian C. Stier (UCSB) & Craig W. Osenberg (UGA)<br>
            <strong>Funding:</strong> NSF OCE-1851510 & OCE-1851032
        </p>

        <div class="hero-stats">
            <div class="hero-stat">
                <div class="hero-stat-number">17,073</div>
                <div class="hero-stat-label">Organisms</div>
            </div>
            <div class="hero-stat">
                <div class="hero-stat-number">221</div>
                <div class="hero-stat-label">Species</div>
            </div>
            <div class="hero-stat">
                <div class="hero-stat-number">228</div>
                <div class="hero-stat-label">Coral Colonies</div>
            </div>
            <div class="hero-stat">
                <div class="hero-stat-number">23</div>
                <div class="hero-stat-label">Data Files</div>
            </div>
        </div>

        <div class="hero-cta">
            <a href="#" class="btn btn-primary" onclick="showSection('getstarted'); return false;">
                Get Started
                <span>&rarr;</span>
            </a>
            <a href="#" class="btn btn-secondary" onclick="showSection('overview'); return false;">
                Learn More
            </a>
        </div>

        <div class="hero-image-wrapper">
            <img src="images/moorea_panorama.jpg" alt="Mo'orea coral reef panorama" class="hero-image" onclick="openLightbox(this.src, 'Mo\'orea coral reefs and lagoon - study site for CAFI research')">
            <div class="hero-image-caption">Mo'orea, French Polynesia - South Pacific</div>
        </div>
    </section>

    <!-- Navigation Cards -->
    <div class="container">
        <div class="nav-cards" id="navCards">
            <div class="nav-card" onclick="showSection('overview')">
                <span class="nav-card-icon"><svg viewBox="0 0 24 24"><path d="M3 3v18h18"/><path d="M18 9l-5 5-4-4-3 3"/></svg></span>
                <h3>Dataset Overview</h3>
                <p>What is CAFI? Learn about organisms living within coral branches</p>
                <span class="nav-card-arrow">&rarr;</span>
            </div>

            <div class="nav-card" onclick="showSection('gallery')">
                <span class="nav-card-icon"><svg viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><path d="M21 15l-5-5L5 21"/></svg></span>
                <h3>Photo Gallery</h3>
                <p>Visual documentation of species and research</p>
                <span class="nav-card-arrow">&rarr;</span>
            </div>

            <div class="nav-card" onclick="showSection('experiments')">
                <span class="nav-card-icon"><svg viewBox="0 0 24 24"><path d="M9 3h6v2H9z"/><path d="M8 5v3l-4 8c-.7 1.3.2 3 1.8 3h12.4c1.6 0 2.5-1.7 1.8-3l-4-8V5"/><path d="M7 14h10"/></svg></span>
                <h3>Research Studies</h3>
                <p>Two experiments and one survey spanning 45 months</p>
                <span class="nav-card-arrow">&rarr;</span>
            </div>

            <div class="nav-card" onclick="showSection('organisms')">
                <span class="nav-card-icon"><svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="3"/><path d="M12 2v4m0 12v4M2 12h4m12 0h4"/><path d="M4.93 4.93l2.83 2.83m8.48 8.48l2.83 2.83M4.93 19.07l2.83-2.83m8.48-8.48l2.83-2.83"/></svg></span>
                <h3>Species Catalog</h3>
                <p>221 species identified from coral colonies</p>
                <span class="nav-card-arrow">&rarr;</span>
            </div>

            <div class="nav-card" onclick="showSection('files')">
                <span class="nav-card-icon"><svg viewBox="0 0 24 24"><path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"/></svg></span>
                <h3>Data Files</h3>
                <p>Navigate the 23 data files organized by type</p>
                <span class="nav-card-arrow">&rarr;</span>
            </div>

            <div class="nav-card" onclick="showSection('methods')">
                <span class="nav-card-icon"><svg viewBox="0 0 24 24"><path d="M14.7 6.3a1 1 0 000 1.4l1.6 1.6a1 1 0 001.4 0l3.77-3.77a6 6 0 01-7.94 7.94l-6.91 6.91a2.12 2.12 0 01-3-3l6.91-6.91a6 6 0 017.94-7.94l-3.76 3.76z"/></svg></span>
                <h3>Methods</h3>
                <p>Field protocols and data collection procedures</p>
                <span class="nav-card-arrow">&rarr;</span>
            </div>

            <div class="nav-card" onclick="showSection('getstarted')">
                <span class="nav-card-icon"><svg viewBox="0 0 24 24"><path d="M5 12h14M12 5l7 7-7 7"/></svg></span>
                <h3>Get Started</h3>
                <p>Download, load, and analyze the dataset</p>
                <span class="nav-card-arrow">&rarr;</span>
            </div>

            <div class="nav-card" onclick="showSection('map')">
                <span class="nav-card-icon"><svg viewBox="0 0 24 24"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"/><circle cx="12" cy="10" r="3"/></svg></span>
                <h3>Study Sites</h3>
                <p>Interactive map of research locations around Mo'orea</p>
                <span class="nav-card-arrow">&rarr;</span>
            </div>

            <div class="nav-card" onclick="showSection('stats')">
                <span class="nav-card-icon"><svg viewBox="0 0 24 24"><path d="M18 20V10"/><path d="M12 20V4"/><path d="M6 20v-6"/></svg></span>
                <h3>Statistics</h3>
                <p>Visualize dataset composition and sampling effort</p>
                <span class="nav-card-arrow">&rarr;</span>
            </div>

            <div class="nav-card" onclick="showSection('citation')">
                <span class="nav-card-icon"><svg viewBox="0 0 24 24"><path d="M6 9H4.5a2.5 2.5 0 010-5H6"/><path d="M18 9h1.5a2.5 2.5 0 000-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0012 0V2Z"/></svg></span>
                <h3>Cite This Dataset</h3>
                <p>Copy-ready citations in APA, BibTeX, and Chicago formats</p>
                <span class="nav-card-arrow">&rarr;</span>
            </div>

            <div class="nav-card" onclick="showSection('downloads')">
                <span class="nav-card-icon"><svg viewBox="0 0 24 24"><path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg></span>
                <h3>Download Center</h3>
                <p>Get the data via GitHub, ZIP, or BCO-DMO</p>
                <span class="nav-card-arrow">&rarr;</span>
            </div>

            <div class="nav-card" onclick="showSection('funding')">
                <span class="nav-card-icon"><svg viewBox="0 0 24 24"><path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 00-3-3.87"/><path d="M16 3.13a4 4 0 010 7.75"/></svg></span>
                <h3>Team & Funding</h3>
                <p>Research team and funding information</p>
                <span class="nav-card-arrow">&rarr;</span>
            </div>
        </div>

        <!-- Overview Section -->
        <section id="overview" class="content-section">
            <div class="section-header">
                <span class="section-label">Understanding the Dataset</span>
                <h2 class="section-title">What Lives Hidden in Coral?</h2>
                <p class="section-subtitle">Cryptic biodiversity within <em>Pocillopora</em> coral colonies</p>
            </div>

            <div class="info-box">
                <div class="info-box-title">What are CAFI?</div>
                <p>
                    <strong>CAFI</strong> stands for <strong>Cryptic Associated Fauna and Invertebrates</strong> &mdash; the organisms (crabs, shrimp, worms, snails, fish) that live within coral branches. While corals appear solid from outside, they house entire communities of organisms in the spaces between branches. These organisms can influence coral health and growth.
                </p>
            </div>

            <p style="font-size: 1.15em; margin-bottom: 32px; color: var(--text-light);">
                This dataset documents the biodiversity hidden inside <em>Pocillopora</em> coral colonies on the reefs of Mo'orea, French Polynesia. From June 2019 to March 2023, researchers extracted, identified, and measured over 17,000 individual organisms representing 221 species.
            </p>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-card-number">17,073</div>
                    <div class="stat-card-label">Individual Organisms</div>
                </div>
                <div class="stat-card">
                    <div class="stat-card-number">221</div>
                    <div class="stat-card-label">Unique Species</div>
                </div>
                <div class="stat-card">
                    <div class="stat-card-number">228</div>
                    <div class="stat-card-label">Coral Colonies</div>
                </div>
                <div class="stat-card">
                    <div class="stat-card-number">55</div>
                    <div class="stat-card-label">Reef Sites</div>
                </div>
                <div class="stat-card">
                    <div class="stat-card-number">45</div>
                    <div class="stat-card-label">Months Duration</div>
                </div>
                <div class="stat-card">
                    <div class="stat-card-number">23</div>
                    <div class="stat-card-label">Data Files</div>
                </div>
            </div>

            <h3 style="font-family: 'Playfair Display', serif; font-size: 1.6em; color: var(--foam-white); margin: 48px 0 24px;">Geographic Location</h3>

            <div class="location-grid">
                <div class="location-card">
                    <div class="location-card-title">Latitude</div>
                    <div class="location-card-value">17.47&deg;S - 17.52&deg;S</div>
                </div>
                <div class="location-card">
                    <div class="location-card-title">Longitude</div>
                    <div class="location-card-value">149.81&deg;W - 149.92&deg;W</div>
                </div>
                <div class="location-card">
                    <div class="location-card-title">Depth Range</div>
                    <div class="location-card-value">1 - 8 meters</div>
                </div>
            </div>

            <h3 style="font-family: 'Playfair Display', serif; font-size: 1.6em; color: var(--foam-white); margin: 48px 0 24px;">Project Timeline</h3>

            <div class="timeline">
                <div class="timeline-item">
                    <h4>June 2019</h4>
                    <p>Field work begins: Experimental setup and initial surveys at Mo'orea</p>
                </div>
                <div class="timeline-item">
                    <h4>2019 - 2021</h4>
                    <p>Monthly monitoring: CAFI censuses, coral physiology sampling, fish surveys</p>
                </div>
                <div class="timeline-item">
                    <h4>2021 - 2023</h4>
                    <p>Laboratory analysis: Specimen identification, physiological assays</p>
                </div>
                <div class="timeline-item">
                    <h4>March 2023</h4>
                    <p>Data collection complete: Final identifications and measurements</p>
                </div>
            </div>

            <div class="alert alert-success">
                <strong>Data Quality Score: 99.7/100</strong>
                <p>This dataset has undergone 6 levels of quality verification. All 17,073 organism records plus supporting data have been validated for accuracy, completeness, and biological plausibility.</p>
            </div>

            <button class="back-btn" onclick="showNav()">&larr; Back to Menu</button>
        </section>

        <!-- Photo Gallery Section -->
        <section id="gallery" class="content-section">
            <div class="section-header">
                <span class="section-label">Visual Documentation</span>
                <h2 class="section-title">Life Inside the Coral</h2>
                <p class="section-subtitle">Click any image to view full size</p>
            </div>

            <div class="info-box">
                <div class="info-box-title">Research Location</div>
                <p>
                    Mo'orea, French Polynesia &mdash; a volcanic island in the South Pacific renowned for its pristine coral reefs and world-class marine research facilities at the UC Berkeley Gump Station.
                </p>
            </div>

            <img src="images/moorea_panorama.jpg" alt="Panoramic view of Mo'orea reef" style="width: 100%; height: 400px; object-fit: cover; border-radius: 20px; margin-bottom: 48px; cursor: pointer; box-shadow: 0 20px 60px rgba(0,0,0,0.4);" onclick="openLightbox(this.src, 'Panoramic view of Mo\'orea coral reefs and lagoon')">

            <h3 style="font-family: 'Playfair Display', serif; font-size: 1.6em; color: var(--foam-white); margin-bottom: 24px;">Featured CAFI Species</h3>
            <p style="color: var(--text-muted); margin-bottom: 32px; font-size: 1.1em;">
                The most common cryptic organisms found living within <em>Pocillopora</em> coral colonies.
            </p>

            <div class="photo-gallery">
                <div class="photo-card" onclick="openLightbox('images/trapezia_serenei.jpg', 'Trapezia serenei - Guard Crab (7.3% of all CAFI)')">
                    <div class="photo-card-image">
                        <img src="images/trapezia_serenei.jpg" alt="Trapezia serenei guard crab" loading="lazy">
                        <div class="photo-card-overlay">
                            <div class="photo-card-zoom">+</div>
                        </div>
                    </div>
                    <div class="photo-card-content">
                        <h4>Guard Crab</h4>
                        <span class="species-name">Trapezia serenei</span>
                        <p>One of the most common CAFI species (1,240 individuals, 7.3%). These crabs defend corals from predators like crown-of-thorns starfish.</p>
                    </div>
                </div>

                <div class="photo-card" onclick="openLightbox('images/harpiliopsis_spinigera.jpg', 'Harpiliopsis spinigera - Coral Shrimp (5.0% of all CAFI)')">
                    <div class="photo-card-image">
                        <img src="images/harpiliopsis_spinigera.jpg" alt="Harpiliopsis spinigera shrimp" loading="lazy">
                        <div class="photo-card-overlay">
                            <div class="photo-card-zoom">+</div>
                        </div>
                    </div>
                    <div class="photo-card-content">
                        <h4>Coral Shrimp</h4>
                        <span class="species-name">Harpiliopsis spinigera</span>
                        <p>Highly abundant shrimp (853 individuals, 5.0%) that lives exclusively in branching corals with distinctive transparent body.</p>
                    </div>
                </div>

                <div class="photo-card" onclick="openLightbox('images/harpiliopsis_depressa.jpg', 'Harpiliopsis depressa - Flattened Coral Shrimp')">
                    <div class="photo-card-image">
                        <img src="images/harpiliopsis_depressa.jpg" alt="Harpiliopsis depressa shrimp" loading="lazy">
                        <div class="photo-card-overlay">
                            <div class="photo-card-zoom">+</div>
                        </div>
                    </div>
                    <div class="photo-card-content">
                        <h4>Flattened Shrimp</h4>
                        <span class="species-name">Harpiliopsis depressa</span>
                        <p>Remarkably flattened body - a specialized adaptation for navigating narrow coral crevices.</p>
                    </div>
                </div>

                <div class="photo-card" onclick="openLightbox('images/galathea_mauritiana.jpg', 'Galathea mauritiana - Squat Lobster (3.0% of all CAFI)')">
                    <div class="photo-card-image">
                        <img src="images/galathea_mauritiana.jpg" alt="Galathea mauritiana squat lobster" loading="lazy">
                        <div class="photo-card-overlay">
                            <div class="photo-card-zoom">+</div>
                        </div>
                    </div>
                    <div class="photo-card-content">
                        <h4>Squat Lobster</h4>
                        <span class="species-name">Galathea mauritiana</span>
                        <p>Common crustacean (516 individuals, 3.0%) with distinctive striped pattern. Filter feeders that benefit from coral water flow.</p>
                    </div>
                </div>

                <div class="photo-card" onclick="openLightbox('images/periclimenes_gonioporae.jpg', 'Periclimenes gonioporae - Cleaner Shrimp (3.0% of all CAFI)')">
                    <div class="photo-card-image">
                        <img src="images/periclimenes_gonioporae.jpg" alt="Periclimenes gonioporae cleaner shrimp" loading="lazy">
                        <div class="photo-card-overlay">
                            <div class="photo-card-zoom">+</div>
                        </div>
                    </div>
                    <div class="photo-card-content">
                        <h4>Cleaner Shrimp</h4>
                        <span class="species-name">Periclimenes gonioporae</span>
                        <p>These shrimp (513 individuals, 3.0%) help maintain coral health by removing parasites. Translucent body with purple spots.</p>
                    </div>
                </div>

                <div class="photo-card" onclick="openLightbox('images/alpheus_sizou.jpg', 'Alpheus cf. sizou - Snapping Shrimp (7.4% of all CAFI)')">
                    <div class="photo-card-image">
                        <img src="images/alpheus_sizou.jpg" alt="Alpheus cf. sizou snapping shrimp" loading="lazy">
                        <div class="photo-card-overlay">
                            <div class="photo-card-zoom">+</div>
                        </div>
                    </div>
                    <div class="photo-card-content">
                        <h4>Snapping Shrimp</h4>
                        <span class="species-name">Alpheus cf. sizou</span>
                        <p>Creates loud cavitation bubbles to stun prey (1,258 individuals, 7.4% of CAFI). The 5th most abundant taxon.</p>
                    </div>
                </div>
            </div>

            <h3 style="font-family: 'Playfair Display', serif; font-size: 1.6em; color: var(--foam-white); margin: 48px 0 24px;">Field Research</h3>
            <p style="color: var(--text-muted); margin-bottom: 32px; font-size: 1.1em;">
                All research conducted at the UC Berkeley Richard B. Gump South Pacific Research Station.
            </p>

            <div class="photo-gallery">
                <div class="photo-card" onclick="openLightbox('images/field_work_1.jpg', 'Field collection - Processing coral colonies')">
                    <div class="photo-card-image">
                        <img src="images/field_work_1.jpg" alt="Field work setup" loading="lazy">
                        <div class="photo-card-overlay">
                            <div class="photo-card-zoom">+</div>
                        </div>
                    </div>
                    <div class="photo-card-content">
                        <h4>Field Collection</h4>
                        <p>Processing coral colonies to extract CAFI organisms. Each coral was carefully dissected to preserve delicate specimens.</p>
                    </div>
                </div>

                <div class="photo-card" onclick="openLightbox('images/field_work_2.jpg', 'Laboratory processing - Sorting and preserving specimens')">
                    <div class="photo-card-image">
                        <img src="images/field_work_2.jpg" alt="Laboratory processing" loading="lazy">
                        <div class="photo-card-overlay">
                            <div class="photo-card-zoom">+</div>
                        </div>
                    </div>
                    <div class="photo-card-content">
                        <h4>Laboratory Processing</h4>
                        <p>Sorting, measuring (to nearest mm), photographing, and preserving specimens. Achieved 76-88% species-level resolution.</p>
                    </div>
                </div>
            </div>

            <div class="stats-grid" style="margin-top: 48px;">
                <div class="stat-card">
                    <div class="stat-card-number">228</div>
                    <div class="stat-card-label">Corals Processed</div>
                </div>
                <div class="stat-card">
                    <div class="stat-card-number">17,073</div>
                    <div class="stat-card-label">Organisms Counted</div>
                </div>
                <div class="stat-card">
                    <div class="stat-card-number">221</div>
                    <div class="stat-card-label">Species Identified</div>
                </div>
                <div class="stat-card">
                    <div class="stat-card-number">24</div>
                    <div class="stat-card-label">Months Field Work</div>
                </div>
            </div>

            <button class="back-btn" onclick="showNav()">&larr; Back to Menu</button>
        </section>

        <!-- Experiments Section -->
        <section id="experiments" class="content-section">
            <div class="section-header">
                <span class="section-label">Research Design</span>
                <h2 class="section-title">Two Experiments + One Survey</h2>
                <p class="section-subtitle">Complementary studies examining coral-CAFI relationships</p>
            </div>

            <div class="experiment-card">
                <h3>Maatea Size Experiment</h3>
                <p><strong>Question:</strong> How does coral colony size affect CAFI abundance and community composition?</p>
                <p><strong>Design:</strong> 60 <em>Pocillopora</em> colonies ranging from 5-47 cm in branch width</p>
                <p><strong>Location:</strong> Maatea backreef (17.6&deg;S, 149.8&deg;W)</p>
                <p><strong>Duration:</strong> 24 months (June 2019 - June 2021)</p>
                <p><strong>Key Findings:</strong></p>
                <ul>
                    <li>8,965 CAFI individuals identified</li>
                    <li>10&times; increase in CAFI from smallest to largest colonies</li>
                    <li>Strong size effect (&eta;&sup2; = 0.565, explaining 56.5% of variance)</li>
                    <li>Monthly monitoring of fish communities</li>
                </ul>
            </div>

            <div class="experiment-card coral-theme">
                <h3>MRB Amount Experiment</h3>
                <p><strong>Question:</strong> Does coral habitat density affect CAFI community assembly?</p>
                <p><strong>Design:</strong> 54 <em>Pocillopora</em> colonies in three density treatments: Low (solitary), Medium (groups of 3), High (groups of 6)</p>
                <p><strong>Location:</strong> MRB north shore backreef (17.5&deg;S, 149.8&deg;W)</p>
                <p><strong>Duration:</strong> 17 months (Dec 2019 - May 2021)</p>
                <p><strong>Key Findings:</strong></p>
                <ul>
                    <li>4,119 CAFI individuals identified</li>
                    <li>Density effects on CAFI community assembly patterns</li>
                    <li>Coral physiology measured: protein, carbohydrates, zooxanthellae</li>
                    <li>3D photogrammetry tracking coral growth over time</li>
                </ul>
            </div>

            <div class="experiment-card sand-theme">
                <h3>Mo'orea Reef Survey</h3>
                <p><strong>Question:</strong> How variable are CAFI communities across natural reef gradients?</p>
                <p><strong>Design:</strong> Observational survey of 114 <em>Pocillopora</em> colonies across 55 sites and 3 reef systems</p>
                <p><strong>Location:</strong> Multiple sites around Mo'orea (17.5&deg;S, 149.8&deg;W)</p>
                <p><strong>Duration:</strong> Summer 2019</p>
                <p><strong>Key Findings:</strong></p>
                <ul>
                    <li>3,989 CAFI individuals identified</li>
                    <li>6-fold variation in CAFI abundance across sites</li>
                    <li>Natural community composition documented</li>
                    <li>Coral characteristics and physiology measured</li>
                </ul>
            </div>

            <h3 style="font-family: 'Playfair Display', serif; font-size: 1.6em; color: var(--foam-white); margin: 48px 0 24px;">How They Connect</h3>

            <p style="font-size: 1.1em; color: var(--text-light); margin-bottom: 20px;">
                These three studies provide complementary perspectives on coral-CAFI relationships:
            </p>

            <ul style="font-size: 1.1em; line-height: 2.2; color: var(--text-light); margin-left: 24px;">
                <li><strong style="color: var(--biolum-cyan);">Maatea Size Experiment</strong> &mdash; Examines natural variation: How does coral size affect CAFI communities?</li>
                <li><strong style="color: var(--coral-pink);">MRB Amount Experiment</strong> &mdash; Tests habitat density effects: How does coral clustering affect CAFI community assembly?</li>
                <li><strong style="color: var(--sand-light);">Mo'orea Survey</strong> &mdash; Provides ecological context: What are CAFI communities like across natural reef gradients?</li>
            </ul>

            <p style="font-size: 1.05em; color: var(--text-muted); margin-top: 24px;">
                Together, these studies reveal that coral size strongly determines CAFI abundance (10&times; increase from small to large colonies), and CAFI communities in turn influence coral physiology and growth.
            </p>

            <button class="back-btn" onclick="showNav()">&larr; Back to Menu</button>
        </section>

        <!-- Organisms Section -->
        <section id="organisms" class="content-section">
            <div class="section-header">
                <span class="section-label">Biodiversity Catalog</span>
                <h2 class="section-title">CAFI Species Catalog</h2>
                <p class="section-subtitle">221 species of crabs, shrimp, worms, snails, and fish</p>
            </div>

            <div class="info-box">
                <div class="info-box-title">What makes CAFI special?</div>
                <p>
                    These organisms occupy different ecological roles: some are <strong>mutualists</strong> that protect the coral (like guard crabs), others are <strong>commensals</strong> seeking shelter, and a few are <strong>parasites</strong>. Understanding these communities informs coral conservation efforts.
                </p>
            </div>

            <h3 style="font-family: 'Playfair Display', serif; font-size: 1.6em; color: var(--foam-white); margin-bottom: 24px;">Top 10 Most Abundant Genera</h3>

            <div class="taxa-grid">
                <div class="taxa-item">
                    <div class="taxa-item-placeholder">G</div>
                    <div class="taxa-item-name">Galeropsis</div>
                    <div class="taxa-item-count">1,904 (11.2%)</div>
                    <div class="taxa-item-label">Snails</div>
                </div>
                <div class="taxa-item">
                    <img src="images/trapezia_serenei.jpg" alt="Trapezia" class="taxa-item-img">
                    <div class="taxa-item-name">Trapezia</div>
                    <div class="taxa-item-count">1,709 (10.0%)</div>
                    <div class="taxa-item-label">Guard crabs</div>
                </div>
                <div class="taxa-item">
                    <div class="taxa-item-placeholder">C</div>
                    <div class="taxa-item-name">Chromis</div>
                    <div class="taxa-item-count">1,349 (7.9%)</div>
                    <div class="taxa-item-label">Damselfish</div>
                </div>
                <div class="taxa-item">
                    <img src="images/harpiliopsis_spinigera.jpg" alt="Harpiliopsis" class="taxa-item-img">
                    <div class="taxa-item-name">Harpiliopsis</div>
                    <div class="taxa-item-count">1,279 (7.5%)</div>
                    <div class="taxa-item-label">Shrimp</div>
                </div>
                <div class="taxa-item">
                    <img src="images/alpheus_sizou.jpg" alt="Alpheus" class="taxa-item-img">
                    <div class="taxa-item-name">Alpheus</div>
                    <div class="taxa-item-count">1,258 (7.4%)</div>
                    <div class="taxa-item-label">Snapping shrimp</div>
                </div>
                <div class="taxa-item">
                    <div class="taxa-item-placeholder">C</div>
                    <div class="taxa-item-name">Calcinus</div>
                    <div class="taxa-item-count">918 (5.4%)</div>
                    <div class="taxa-item-label">Hermit crabs</div>
                </div>
                <div class="taxa-item">
                    <div class="taxa-item-placeholder">D</div>
                    <div class="taxa-item-name">Dascyllus</div>
                    <div class="taxa-item-count">723 (4.2%)</div>
                    <div class="taxa-item-label">Damselfish</div>
                </div>
                <div class="taxa-item">
                    <div class="taxa-item-placeholder">P</div>
                    <div class="taxa-item-name">Paragobiodon</div>
                    <div class="taxa-item-count">538 (3.2%)</div>
                    <div class="taxa-item-label">Gobies</div>
                </div>
                <div class="taxa-item">
                    <img src="images/galathea_mauritiana.jpg" alt="Galathea" class="taxa-item-img">
                    <div class="taxa-item-name">Galathea</div>
                    <div class="taxa-item-count">523 (3.1%)</div>
                    <div class="taxa-item-label">Squat lobsters</div>
                </div>
                <div class="taxa-item">
                    <img src="images/periclimenes_gonioporae.jpg" alt="Periclimenes" class="taxa-item-img">
                    <div class="taxa-item-name">Periclimenes</div>
                    <div class="taxa-item-count">513 (3.0%)</div>
                    <div class="taxa-item-label">Cleaner shrimp</div>
                </div>
            </div>

            <h3 style="font-family: 'Playfair Display', serif; font-size: 1.6em; color: var(--foam-white); margin: 48px 0 24px;">Taxonomic Resolution</h3>
            <p style="color: var(--text-muted); margin-bottom: 24px; font-size: 1.1em;">
                Quality ranks in the <strong style="color: var(--foam-white);">top 5%</strong> of cryptofauna studies worldwide:
            </p>

            <table class="data-table">
                <thead>
                    <tr>
                        <th>Study</th>
                        <th>Species Level</th>
                        <th>Genus Level</th>
                        <th>Family Level</th>
                        <th>Uncertain</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Maatea Size</td>
                        <td>82.4%</td>
                        <td>89.7%</td>
                        <td>98.6%</td>
                        <td>0.5%</td>
                    </tr>
                    <tr>
                        <td>MRB Amount</td>
                        <td>87.8%</td>
                        <td>94.3%</td>
                        <td>99.1%</td>
                        <td>0.1%</td>
                    </tr>
                    <tr>
                        <td>Survey</td>
                        <td>76.1%</td>
                        <td>92.8%</td>
                        <td>97.9%</td>
                        <td>3.3%</td>
                    </tr>
                </tbody>
            </table>

            <p style="color: var(--text-muted); margin-top: 24px; font-size: 1.05em;">
                <strong style="color: var(--coral-pink);">Typical cryptofauna studies:</strong> 50-70% species resolution<br>
                <strong style="color: var(--biolum-cyan);">This dataset:</strong> 76-88% species resolution
            </p>

            <h3 style="font-family: 'Playfair Display', serif; font-size: 1.6em; color: var(--foam-white); margin: 48px 0 24px;">Top 5 Families</h3>
            <ol style="font-size: 1.1em; line-height: 2.2; color: var(--text-light); margin-left: 24px;">
                <li><strong style="color: var(--biolum-cyan);">Palaemonidae</strong> (shrimp): 2,195 individuals (12.9%)</li>
                <li><strong style="color: var(--biolum-cyan);">Muricidae</strong> (snails): 2,139 individuals (12.5%)</li>
                <li><strong style="color: var(--biolum-cyan);">Pomacentridae</strong> (damselfish): 2,091 individuals (12.2%)</li>
                <li><strong style="color: var(--biolum-cyan);">Alpheidae</strong> (snapping shrimp): 1,930 individuals (11.3%)</li>
                <li><strong style="color: var(--biolum-cyan);">Trapeziidae</strong> (guard crabs): 1,709 individuals (10.0%)</li>
            </ol>

            <div class="alert alert-info" style="margin-top: 40px;">
                <strong>Ecological Pattern</strong>
                <p>The community is dominated by mutualistic species like <em>Trapezia</em> guard crabs and <em>Alpheus</em> snapping shrimp that defend corals from predators.</p>
            </div>

            <button class="back-btn" onclick="showNav()">&larr; Back to Menu</button>
        </section>

        <!-- Files Section -->
        <section id="files" class="content-section">
            <div class="section-header">
                <span class="section-label">Data Structure</span>
                <h2 class="section-title">23 Data Files</h2>
                <p class="section-subtitle">Organized into 3 BCO-DMO datasets for repository submission</p>
            </div>

            <!-- Introduction to the data -->
            <div style="background: linear-gradient(135deg, rgba(15, 40, 71, 0.6) 0%, rgba(26, 64, 102, 0.4) 100%); border: 1px solid rgba(0, 245, 212, 0.15); border-radius: 16px; padding: 32px; margin-bottom: 40px;">
                <h3 style="font-family: 'Playfair Display', serif; font-size: 1.4em; color: var(--foam-white); margin-bottom: 16px;">Understanding the Data Structure</h3>
                <p style="color: var(--text-light); margin-bottom: 16px;">This dataset captures the complete ecology of cryptic coral-associated communities across <strong>228 <em>Pocillopora</em> coral colonies</strong> from Mo'orea's backreef lagoons. The data spans three complementary studies (see <a href="#" onclick="showSection('experiments'); return false;" style="color: var(--biolum-cyan);">Research Studies</a>):</p>
                <ul style="color: var(--text-muted); margin-left: 24px; line-height: 2;">
                    <li><strong style="color: var(--coral-pink);">Maatea Size Experiment</strong> (60 corals) &mdash; Tests how coral colony size affects CAFI communities</li>
                    <li><strong style="color: var(--coral-pink);">Mo'orea Survey</strong> (114 corals) &mdash; Baseline characterization of natural CAFI variation</li>
                    <li><strong style="color: var(--coral-pink);">MRB Amount Experiment</strong> (54 corals) &mdash; Manipulates CAFI density to test effects on coral growth</li>
                </ul>
                <p style="color: var(--text-light); margin-top: 16px;">All data files are linked by <code style="color: var(--biolum-cyan);">coral_id</code> &mdash; a unique identifier for each colony (e.g., MAT-POC01, FE-POC03, 2-4C) that allows you to connect CAFI counts, physiology measurements, fish surveys, and 3D morphology for the same coral.</p>
            </div>

            <h3 style="font-family: 'Playfair Display', serif; font-size: 1.6em; color: var(--foam-white); margin-bottom: 24px;">BCO-DMO Dataset Organization</h3>

            <p style="color: var(--text-muted); margin-bottom: 16px;">Data files are organized into <strong>3 thematic datasets</strong> for submission to the <a href="https://www.bco-dmo.org/" target="_blank" style="color: var(--biolum-cyan);">Biological and Chemical Oceanography Data Management Office (BCO-DMO)</a>, a repository for oceanographic research data funded by NSF.</p>

            <p style="color: var(--text-muted); margin-bottom: 24px;">Studies remain identifiable within each dataset by filename prefix (<code>maatea_size_</code>, <code>moorea_survey_</code>, <code>mrb_amount_</code>) and the <code>coral_id</code> column. Click any file to download it directly.</p>

            <!-- Dataset 1: Biological Data -->
            <div class="dataset-card" style="background: linear-gradient(135deg, rgba(0, 245, 212, 0.08) 0%, rgba(0, 187, 249, 0.05) 100%); border: 1px solid rgba(0, 245, 212, 0.2); border-radius: 16px; padding: 32px; margin-bottom: 32px;">
                <h4 style="font-family: 'Playfair Display', serif; font-size: 1.4em; color: var(--biolum-cyan); margin-bottom: 8px;">Dataset 1: Biological Data</h4>
                <p style="color: var(--text-muted); margin-bottom: 12px;">CAFI taxonomy, coral physiology, and fish surveys &mdash; <strong>10 files</strong></p>

                <div style="background: rgba(0, 0, 0, 0.2); border-radius: 12px; padding: 20px; margin-bottom: 20px;">
                    <p style="color: var(--text-light); font-size: 0.95em; margin: 0;"><strong>What's in this dataset:</strong> Every individual organism extracted from coral colonies, identified to species level where possible (82% species-level resolution). Includes <strong>17,073 CAFI records</strong> across 228 corals, plus coral tissue physiology (protein, carbohydrates, zooxanthellae) and fish community surveys. Species names are validated against the <a href="https://www.marinespecies.org/" target="_blank" style="color: var(--biolum-cyan);">World Register of Marine Species (WoRMS)</a> with AphiaIDs included.</p>
                </div>

                <div style="display: grid; gap: 12px;">
                    <div style="font-weight: 500; color: var(--coral-pink); margin-top: 12px;">CAFI Taxonomy (3 primary files)</div>
                    <a href="data/maatea_size_cafi_taxonomy_merged_2019_2021_v2.csv" class="file-link" style="display: block; padding: 12px 16px; background: rgba(0, 0, 0, 0.2); border-radius: 8px; color: var(--text-light); text-decoration: none; transition: all 0.3s;">
                        <code style="color: var(--biolum-cyan);">maatea_size_cafi_taxonomy_merged_2019_2021_v2.csv</code>
                        <span style="float: right; color: var(--text-muted); font-size: 0.9em;">8,965 organisms</span>
                    </a>
                    <a href="data/moorea_survey_cafi_taxonomy_summer_2019_v5.csv" class="file-link" style="display: block; padding: 12px 16px; background: rgba(0, 0, 0, 0.2); border-radius: 8px; color: var(--text-light); text-decoration: none; transition: all 0.3s;">
                        <code style="color: var(--biolum-cyan);">moorea_survey_cafi_taxonomy_summer_2019_v5.csv</code>
                        <span style="float: right; color: var(--text-muted); font-size: 0.9em;">3,989 organisms</span>
                    </a>
                    <a href="data/mrb_amount_cafi_field_experiment_summer_2021_v4.csv" class="file-link" style="display: block; padding: 12px 16px; background: rgba(0, 0, 0, 0.2); border-radius: 8px; color: var(--text-light); text-decoration: none; transition: all 0.3s;">
                        <code style="color: var(--biolum-cyan);">mrb_amount_cafi_field_experiment_summer_2021_v4.csv</code>
                        <span style="float: right; color: var(--text-muted); font-size: 0.9em;">4,119 organisms</span>
                    </a>

                    <div style="font-weight: 500; color: var(--coral-pink); margin-top: 12px;">Coral Physiology (3 primary + 2 supplemental)</div>
                    <a href="data/maatea_size_physiology_master_long_2019_2021_v3.csv" class="file-link" style="display: block; padding: 12px 16px; background: rgba(0, 0, 0, 0.2); border-radius: 8px; color: var(--text-light); text-decoration: none; transition: all 0.3s;">
                        <code style="color: var(--biolum-cyan);">maatea_size_physiology_master_long_2019_2021_v3.csv</code>
                        <span style="float: right; color: var(--text-muted); font-size: 0.9em;">118 samples</span>
                    </a>
                    <a href="data/moorea_survey_physiology_master_2019_v3.csv" class="file-link" style="display: block; padding: 12px 16px; background: rgba(0, 0, 0, 0.2); border-radius: 8px; color: var(--text-light); text-decoration: none; transition: all 0.3s;">
                        <code style="color: var(--biolum-cyan);">moorea_survey_physiology_master_2019_v3.csv</code>
                        <span style="float: right; color: var(--text-muted); font-size: 0.9em;">108 samples</span>
                    </a>
                    <a href="data/mrb_amount_physiology_master_2019_2021_v5.csv" class="file-link" style="display: block; padding: 12px 16px; background: rgba(0, 0, 0, 0.2); border-radius: 8px; color: var(--text-light); text-decoration: none; transition: all 0.3s;">
                        <code style="color: var(--biolum-cyan);">mrb_amount_physiology_master_2019_2021_v5.csv</code>
                        <span style="float: right; color: var(--text-muted); font-size: 0.9em;">53 samples</span>
                    </a>

                    <div style="font-weight: 500; color: var(--coral-pink); margin-top: 12px;">Fish Surveys (2 primary)</div>
                    <a href="data/maatea_size_fish_surveys_2019_2021_v1.csv" class="file-link" style="display: block; padding: 12px 16px; background: rgba(0, 0, 0, 0.2); border-radius: 8px; color: var(--text-light); text-decoration: none; transition: all 0.3s;">
                        <code style="color: var(--biolum-cyan);">maatea_size_fish_surveys_2019_2021_v1.csv</code>
                        <span style="float: right; color: var(--text-muted); font-size: 0.9em;">4,581 observations</span>
                    </a>
                    <a href="data/mrb_amount_fish_surveys_may_2021_v1.csv" class="file-link" style="display: block; padding: 12px 16px; background: rgba(0, 0, 0, 0.2); border-radius: 8px; color: var(--text-light); text-decoration: none; transition: all 0.3s;">
                        <code style="color: var(--biolum-cyan);">mrb_amount_fish_surveys_may_2021_v1.csv</code>
                        <span style="float: right; color: var(--text-muted); font-size: 0.9em;">999 observations</span>
                    </a>
                </div>
            </div>

            <!-- Dataset 2: Coral Morphometry -->
            <div class="dataset-card" style="background: linear-gradient(135deg, rgba(255, 107, 138, 0.08) 0%, rgba(255, 140, 66, 0.05) 100%); border: 1px solid rgba(255, 107, 138, 0.2); border-radius: 16px; padding: 32px; margin-bottom: 32px;">
                <h4 style="font-family: 'Playfair Display', serif; font-size: 1.4em; color: var(--coral-pink); margin-bottom: 8px;">Dataset 2: Coral Morphometry</h4>
                <p style="color: var(--text-muted); margin-bottom: 12px;">Photogrammetry, growth measurements, and colony characteristics &mdash; <strong>9 files</strong></p>

                <div style="background: rgba(0, 0, 0, 0.2); border-radius: 12px; padding: 20px; margin-bottom: 20px;">
                    <p style="color: var(--text-light); font-size: 0.95em; margin: 0;"><strong>What's in this dataset:</strong> 3D coral structure from underwater photogrammetry using Structure-from-Motion (SfM) reconstruction. Measurements include surface area (cm&sup2;), volume (cm&sup3;), and height (cm) for tracking coral growth over 17-24 months. Colony characteristics include branch width, morphotype, and GPS coordinates. See <a href="#" onclick="showSection('methods'); return false;" style="color: var(--coral-pink);">Methods</a> for photogrammetry processing details.</p>
                </div>

                <div style="display: grid; gap: 12px;">
                    <div style="font-weight: 500; color: var(--biolum-cyan); margin-top: 12px;">Photogrammetry (2 primary + 2 supplemental)</div>
                    <a href="data/maatea_size_photogrammetry_2019_2021_v1.csv" class="file-link" style="display: block; padding: 12px 16px; background: rgba(0, 0, 0, 0.2); border-radius: 8px; color: var(--text-light); text-decoration: none; transition: all 0.3s;">
                        <code style="color: var(--coral-pink);">maatea_size_photogrammetry_2019_2021_v1.csv</code>
                        <span style="float: right; color: var(--text-muted); font-size: 0.9em;">117 models</span>
                    </a>
                    <a href="data/mrb_amount_photogrammetry_measures_2019_2021_v1.csv" class="file-link" style="display: block; padding: 12px 16px; background: rgba(0, 0, 0, 0.2); border-radius: 8px; color: var(--text-light); text-decoration: none; transition: all 0.3s;">
                        <code style="color: var(--coral-pink);">mrb_amount_photogrammetry_measures_2019_2021_v1.csv</code>
                        <span style="float: right; color: var(--text-muted); font-size: 0.9em;">108 models</span>
                    </a>

                    <div style="font-weight: 500; color: var(--biolum-cyan); margin-top: 12px;">Coral Growth (1 primary + 1 supplemental)</div>
                    <a href="data/mrb_amount_coral_growth_surface_area_change_v1.csv" class="file-link" style="display: block; padding: 12px 16px; background: rgba(0, 0, 0, 0.2); border-radius: 8px; color: var(--text-light); text-decoration: none; transition: all 0.3s;">
                        <code style="color: var(--coral-pink);">mrb_amount_coral_growth_surface_area_change_v1.csv</code>
                        <span style="float: right; color: var(--text-muted); font-size: 0.9em;">54 corals</span>
                    </a>

                    <div style="font-weight: 500; color: var(--biolum-cyan); margin-top: 12px;">Colony Characteristics (2 primary + 1 supplemental)</div>
                    <a href="data/moorea_survey_coral_characteristics_merged_2019_v2.csv" class="file-link" style="display: block; padding: 12px 16px; background: rgba(0, 0, 0, 0.2); border-radius: 8px; color: var(--text-light); text-decoration: none; transition: all 0.3s;">
                        <code style="color: var(--coral-pink);">moorea_survey_coral_characteristics_merged_2019_v2.csv</code>
                        <span style="float: right; color: var(--text-muted); font-size: 0.9em;">114 colonies</span>
                    </a>
                    <a href="data/maatea_size_colony_measurements_wide_2019_2021_v1.csv" class="file-link" style="display: block; padding: 12px 16px; background: rgba(0, 0, 0, 0.2); border-radius: 8px; color: var(--text-light); text-decoration: none; transition: all 0.3s;">
                        <code style="color: var(--coral-pink);">maatea_size_colony_measurements_wide_2019_2021_v1.csv</code>
                        <span style="float: right; color: var(--text-muted); font-size: 0.9em;">60 colonies</span>
                    </a>
                </div>
            </div>

            <!-- Dataset 3: Experimental Design -->
            <div class="dataset-card" style="background: linear-gradient(135deg, rgba(0, 187, 249, 0.08) 0%, rgba(0, 245, 212, 0.05) 100%); border: 1px solid rgba(0, 187, 249, 0.2); border-radius: 16px; padding: 32px; margin-bottom: 32px;">
                <h4 style="font-family: 'Playfair Display', serif; font-size: 1.4em; color: var(--biolum-blue); margin-bottom: 8px;">Dataset 3: Experimental Design</h4>
                <p style="color: var(--text-muted); margin-bottom: 12px;">Treatment assignments and genetic sample metadata &mdash; <strong>4 files</strong></p>

                <div style="background: rgba(0, 0, 0, 0.2); border-radius: 12px; padding: 20px; margin-bottom: 20px;">
                    <p style="color: var(--text-light); font-size: 0.95em; margin: 0;"><strong>What's in this dataset:</strong> The experimental "key" files that tell you which coral got which treatment. Essential for any statistical analysis &mdash; join these files to CAFI taxonomy or physiology data using <code style="color: var(--biolum-blue);">coral_id</code>. Treatment factors include coral size class (thin/medium/thick), CAFI manipulation (present/removed), and density treatment (low/medium/high = 1/3/6 corals per array).</p>
                </div>

                <div style="display: grid; gap: 12px;">
                    <div style="font-weight: 500; color: var(--coral-orange); margin-top: 12px;">Treatment Assignments (2 primary + 1 supplemental)</div>
                    <a href="data/maatea_size_experimental_treatments_v1.csv" class="file-link" style="display: block; padding: 12px 16px; background: rgba(0, 0, 0, 0.2); border-radius: 8px; color: var(--text-light); text-decoration: none; transition: all 0.3s;">
                        <code style="color: var(--biolum-blue);">maatea_size_experimental_treatments_v1.csv</code>
                        <span style="float: right; color: var(--text-muted); font-size: 0.9em;">60 corals</span>
                    </a>
                    <a href="data/mrb_amount_experimental_treatments_v1.csv" class="file-link" style="display: block; padding: 12px 16px; background: rgba(0, 0, 0, 0.2); border-radius: 8px; color: var(--text-light); text-decoration: none; transition: all 0.3s;">
                        <code style="color: var(--biolum-blue);">mrb_amount_experimental_treatments_v1.csv</code>
                        <span style="float: right; color: var(--text-muted); font-size: 0.9em;">54 corals</span>
                    </a>

                    <div style="font-weight: 500; color: var(--coral-orange); margin-top: 12px;">Genetic Samples (1 primary)</div>
                    <a href="data/maatea_size_genetic_samples_metadata_v3.xlsx" class="file-link" style="display: block; padding: 12px 16px; background: rgba(0, 0, 0, 0.2); border-radius: 8px; color: var(--text-light); text-decoration: none; transition: all 0.3s;">
                        <code style="color: var(--biolum-blue);">maatea_size_genetic_samples_metadata_v3.xlsx</code>
                        <span style="float: right; color: var(--text-muted); font-size: 0.9em;">60 samples</span>
                    </a>
                </div>
            </div>

            <!-- How to Use These Files -->
            <div style="background: linear-gradient(135deg, rgba(255, 140, 66, 0.08) 0%, rgba(255, 107, 138, 0.05) 100%); border: 1px solid rgba(255, 140, 66, 0.2); border-radius: 16px; padding: 32px; margin-bottom: 32px;">
                <h4 style="font-family: 'Playfair Display', serif; font-size: 1.4em; color: var(--coral-orange); margin-bottom: 16px;">How to Connect the Files</h4>
                <p style="color: var(--text-light); margin-bottom: 16px;">Most analyses require joining data from multiple files. Here's a typical workflow:</p>
                <ol style="color: var(--text-muted); margin-left: 24px; line-height: 2.2;">
                    <li><strong style="color: var(--text-light);">Start with treatment file</strong> &mdash; Load <code>*_experimental_treatments_*.csv</code> to get your coral_ids and treatment assignments</li>
                    <li><strong style="color: var(--text-light);">Add biological response</strong> &mdash; Join CAFI taxonomy or physiology data using <code>coral_id</code></li>
                    <li><strong style="color: var(--text-light);">Add coral size</strong> &mdash; Join photogrammetry or colony measurements if analyzing size effects</li>
                    <li><strong style="color: var(--text-light);">Filter by time point</strong> &mdash; Use <code>sampling_date</code> or <code>time_point</code> column to select initial vs. final measurements</li>
                </ol>
                <p style="color: var(--text-light); margin-top: 16px;">See <a href="#" onclick="showSection('getstarted'); return false;" style="color: var(--coral-orange);">Get Started</a> for complete R and Python code examples.</p>
            </div>

            <div class="alert alert-info">
                <strong>File Naming Convention</strong>
                <p>All files follow the pattern: <code>[study]_[data_type]_[details]_v[version].csv</code></p>
                <ul style="margin-top: 12px; margin-left: 20px; color: var(--text-muted);">
                    <li><code>maatea_size_*</code> &mdash; <strong>Maatea Size Experiment</strong> &mdash; 60 corals testing how colony size affects CAFI</li>
                    <li><code>moorea_survey_*</code> &mdash; <strong>Mo'orea Survey</strong> &mdash; 114 corals characterizing natural CAFI variation</li>
                    <li><code>mrb_amount_*</code> &mdash; <strong>MRB Amount Experiment</strong> &mdash; 54 corals testing CAFI effects on coral growth</li>
                </ul>
            </div>

            <h3 style="font-family: 'Playfair Display', serif; font-size: 1.6em; color: var(--foam-white); margin: 48px 0 24px;">Supplemental Files</h3>

            <p style="color: var(--text-muted); margin-bottom: 20px;">These 7 additional files provide raw data, QC verification, and methodological supplements. Use these if you need to verify primary file processing or access detailed technical outputs:</p>

            <div style="display: grid; gap: 8px; font-size: 0.95em;">
                <div style="padding: 10px 16px; background: rgba(0, 0, 0, 0.15); border-radius: 6px; color: var(--text-muted);">
                    <code>mrb_amount_photogrammetry_200k_mesh_2019_2021_v1.csv</code> &mdash; Raw photogrammetry output (264 rows)
                </div>
                <div style="padding: 10px 16px; background: rgba(0, 0, 0, 0.15); border-radius: 6px; color: var(--text-muted);">
                    <code>mrb_amount_coral_growth_surface_area_change_filtered_v1.csv</code> &mdash; QC-filtered growth data (44 corals)
                </div>
                <div style="padding: 10px 16px; background: rgba(0, 0, 0, 0.15); border-radius: 6px; color: var(--text-muted);">
                    <code>mrb_amount_coral_id_position_treatment_v1.csv</code> &mdash; Grid position metadata
                </div>
                <div style="padding: 10px 16px; background: rgba(0, 0, 0, 0.15); border-radius: 6px; color: var(--text-muted);">
                    <code>maatea_size_photogrammetry_summer_2019_v1.xlsx</code> &mdash; Detailed 2019 photogrammetry
                </div>
                <div style="padding: 10px 16px; background: rgba(0, 0, 0, 0.15); border-radius: 6px; color: var(--text-muted);">
                    <code>mrb_amount_manual_colony_measurements_2019_2021_v1.xlsx</code> &mdash; Manual field measurements
                </div>
                <div style="padding: 10px 16px; background: rgba(0, 0, 0, 0.15); border-radius: 6px; color: var(--text-muted);">
                    <code>moorea_survey_tip_stump_comparison_dec_2019_v1.xlsx</code> &mdash; Tip vs stump comparison
                </div>
                <div style="padding: 10px 16px; background: rgba(0, 0, 0, 0.15); border-radius: 6px; color: var(--text-muted);">
                    <code>moorea_survey_tip_stump_zoox_counts_dec_2019_v1.xlsx</code> &mdash; Zooxanthellae counts
                </div>
            </div>

            <h3 style="font-family: 'Playfair Display', serif; font-size: 1.6em; color: var(--foam-white); margin: 48px 0 24px;">Repository Structure</h3>

            <pre><code><span class="folder">moorea-cafi-data/</span>
<span class="folder"> data/</span>                          <span class="comment"># 23 data files (CSV + XLSX)</span>
<span class="folder"> metadata/</span>                      <span class="comment"># 24 metadata files</span>
<span class="file">    README_*_project_overview.txt</span>  <span class="comment"># 5 method overviews</span>
<span class="file">    README_*_metadata_v*.xlsx</span>  <span class="comment"># 8 data dictionaries</span>
<span class="file">    README_*_metadata_v*.csv</span>   <span class="comment"># 8 BCO-DMO parameter files</span>
<span class="file">    site_locations.csv</span>        <span class="comment"># GPS coordinates</span>
<span class="file">    personnel.csv</span>             <span class="comment"># Research team</span>
<span class="folder"> images/</span>                        <span class="comment"># Species photos and figures</span>
<span class="file"> <a href="README.md" style="color: var(--biolum-cyan);">README.md</a></span>                      <span class="comment"># Start here!</span>
<span class="file"> <a href="GETTING_STARTED.md" style="color: var(--biolum-cyan);">GETTING_STARTED.md</a></span>             <span class="comment"># Quick start guide</span>
<span class="file"> <a href="DATA_DICTIONARY.md" style="color: var(--biolum-cyan);">DATA_DICTIONARY.md</a></span>             <span class="comment"># Every column explained</span>
<span class="file"> <a href="BCO_DMO_FILE_DESCRIPTIONS.csv" style="color: var(--biolum-cyan);">BCO_DMO_FILE_DESCRIPTIONS.csv</a></span>  <span class="comment"># Complete file index</span>
<span class="file"> CITATION.cff</span>                   <span class="comment"># How to cite</span>
<span class="file"> LICENSE</span>                        <span class="comment"># CC-BY-4.0</span></code></pre>

            <button class="back-btn" onclick="showNav()">&larr; Back to Menu</button>
        </section>

        <!-- Methods Section -->
        <section id="methods" class="content-section">
            <div class="section-header">
                <span class="section-label">Methodology</span>
                <h2 class="section-title">How Data Was Collected</h2>
                <p class="section-subtitle">Field protocols and quality control procedures</p>
            </div>

            <div class="alert alert-warning">
                <strong>Research Location:</strong> UC Berkeley Richard B. Gump South Pacific Research Station, Mo'orea, French Polynesia<br><br>
                <strong>Timeline:</strong> Field work (June 2019 - June 2021) in Tahiti Time (UTC-10) + Laboratory analysis (2021 - March 2023) = ~45 months total<br>
                <strong>Team:</strong> PIs Adrian C. Stier (UCSB) & Craig W. Osenberg (UGA); Field Team: Joseph Curtis (UCSB) & Alex Primo (UGA)
            </div>

            <h3 style="font-family: 'Playfair Display', serif; font-size: 1.6em; color: var(--foam-white); margin: 40px 0 24px;">Field Collection Protocol</h3>

            <div class="timeline">
                <div class="timeline-item">
                    <h4>Step 1: Coral Selection</h4>
                    <p><em>Pocillopora</em> colonies were selected across a range of sizes (5-47 cm branch width) and reef sites (depth 1-8m). Colonies were tagged with unique IDs (e.g., FE-POC03, 2-4C, MAT-POC15).</p>
                </div>
                <div class="timeline-item">
                    <h4>Step 2: CAFI Census</h4>
                    <p>Corals were carefully broken apart and every visible organism was extracted, counted, measured (to nearest mm), and photographed. CAFI were preserved in ethanol for later identification.</p>
                </div>
                <div class="timeline-item">
                    <h4>Step 3: Coral Physiology</h4>
                    <p>Coral tissue was collected, homogenized, and analyzed for protein content (Bradford assay), carbohydrate content (phenol-sulfuric acid assay), and zooxanthellae density (hemocytometer counts).</p>
                </div>
                <div class="timeline-item">
                    <h4>Step 4: 3D Photogrammetry</h4>
                    <p>Corals were photographed from multiple angles underwater. Structure-from-Motion software reconstructed 3D models to measure surface area, volume, and height changes over time.</p>
                </div>
                <div class="timeline-item">
                    <h4>Step 5: Laboratory Identification</h4>
                    <p>CAFI specimens were identified under microscope using taxonomic keys. Species names were validated against the World Register of Marine Species (WoRMS) database.</p>
                </div>
            </div>

            <h3 style="font-family: 'Playfair Display', serif; font-size: 1.6em; color: var(--foam-white); margin: 48px 0 24px;">Measurement Precision</h3>

            <table class="data-table">
                <thead>
                    <tr>
                        <th>Measurement</th>
                        <th>Method</th>
                        <th>Precision (CV)</th>
                        <th>Assessment</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Protein</td>
                        <td>Bradford spectrophotometry</td>
                        <td>1.2-2.1%</td>
                        <td style="color: var(--biolum-cyan);">High</td>
                    </tr>
                    <tr>
                        <td>Carbohydrates</td>
                        <td>Phenol-sulfuric acid</td>
                        <td>1.2-2.1%</td>
                        <td style="color: var(--biolum-cyan);">High</td>
                    </tr>
                    <tr>
                        <td>Zooxanthellae</td>
                        <td>Hemocytometer counts</td>
                        <td>~5%</td>
                        <td style="color: var(--biolum-cyan);">Good</td>
                    </tr>
                    <tr>
                        <td>CAFI size</td>
                        <td>Calipers/microscope</td>
                        <td>&pm;1mm</td>
                        <td style="color: var(--biolum-cyan);">High</td>
                    </tr>
                    <tr>
                        <td>Surface area</td>
                        <td>3D photogrammetry</td>
                        <td>~10%</td>
                        <td style="color: var(--biolum-cyan);">Good</td>
                    </tr>
                </tbody>
            </table>

            <p style="color: var(--text-muted); margin-top: 24px; font-size: 1.05em;">
                <strong style="color: var(--foam-white);">Clinical chemistry standard:</strong> CV &lt; 5%<br>
                <strong style="color: var(--biolum-cyan);">This dataset:</strong> CV 1.2-2.1% for physiological measurements
            </p>

            <button class="back-btn" onclick="showNav()">&larr; Back to Menu</button>
        </section>

        <!-- Get Started Section -->
        <section id="getstarted" class="content-section">
            <div class="section-header">
                <span class="section-label">Quick Start Guide</span>
                <h2 class="section-title">Start Analyzing</h2>
                <p class="section-subtitle">Download, load, and analyze the dataset</p>
            </div>

            <h3 style="font-family: 'Playfair Display', serif; font-size: 1.6em; color: var(--foam-white); margin-bottom: 24px;">Step 1: Download the Data</h3>

            <pre><code>git clone https://github.com/stier-lab/moorea-cafi-data.git</code></pre>

            <p style="color: var(--text-muted); margin-top: 16px; font-size: 1.05em;">
                Or download directly from: <a href="https://github.com/stier-lab/moorea-cafi-data" target="_blank" style="color: var(--biolum-cyan); text-decoration: underline;">github.com/stier-lab/moorea-cafi-data</a>
            </p>

            <h3 style="font-family: 'Playfair Display', serif; font-size: 1.6em; color: var(--foam-white); margin: 40px 0 24px;">Step 2: Read the Documentation</h3>

            <ul style="font-size: 1.1em; line-height: 2.2; color: var(--text-light); margin-left: 24px;">
                <li><strong style="color: var(--biolum-cyan);">README.md</strong> &mdash; Project overview, authors, funding</li>
                <li><strong style="color: var(--biolum-cyan);">GETTING_STARTED.md</strong> &mdash; Quick start guide with code examples</li>
                <li><strong style="color: var(--biolum-cyan);">DATA_DICTIONARY.md</strong> &mdash; Every column explained</li>
            </ul>

            <h3 style="font-family: 'Playfair Display', serif; font-size: 1.6em; color: var(--foam-white); margin: 40px 0 24px;">Step 3: Load the Data</h3>

            <h4 style="font-family: 'Playfair Display', serif; font-size: 1.2em; color: var(--coral-pink); margin: 24px 0 16px;">In R:</h4>
            <pre><code># Load CAFI data
cafi <- read.csv("data/maatea_size_cafi_taxonomy_merged_2019_2021_v2.csv")

# Load physiology data
phys <- read.csv("data/maatea_size_physiology_master_long_2019_2021_v3.csv")

# Quick summary
summary(cafi$count_numeric)
table(cafi$lowest_level)</code></pre>

            <h4 style="font-family: 'Playfair Display', serif; font-size: 1.2em; color: var(--coral-pink); margin: 24px 0 16px;">In Python:</h4>
            <pre><code>import pandas as pd

# Load CAFI data
cafi = pd.read_csv("data/maatea_size_cafi_taxonomy_merged_2019_2021_v2.csv")

# Load physiology data
phys = pd.read_csv("data/maatea_size_physiology_master_long_2019_2021_v3.csv")

# Quick summary
cafi['count_numeric'].describe()
cafi['lowest_level'].value_counts()</code></pre>

            <h3 style="font-family: 'Playfair Display', serif; font-size: 1.6em; color: var(--foam-white); margin: 40px 0 24px;">Step 4: Example Analysis</h3>

            <pre><code># R: CAFI abundance by coral size
library(dplyr)
library(ggplot2)

cafi_per_coral <- cafi %>%
  group_by(coral_id, branch_width) %>%
  summarise(total_cafi = sum(count_numeric, na.rm=TRUE))

ggplot(cafi_per_coral, aes(x=branch_width, y=total_cafi)) +
  geom_point(color="#00f5d4") +
  geom_smooth(method="lm", color="#ff6b8a") +
  theme_minimal() +
  labs(title="CAFI Abundance Increases with Coral Size",
       x="Coral Branch Width (cm)", y="Total CAFI")</code></pre>

            <h3 style="font-family: 'Playfair Display', serif; font-size: 1.6em; color: var(--foam-white); margin: 40px 0 24px;">Suggested Research Questions</h3>

            <ul style="font-size: 1.05em; line-height: 2.2; color: var(--text-light); margin-left: 24px;">
                <li>How does CAFI community composition change with coral size?</li>
                <li>Do mutualistic species (e.g., <em>Trapezia</em>) increase coral protein content?</li>
                <li>Is CAFI diversity correlated with coral surface area?</li>
                <li>How do fish communities respond to CAFI abundance?</li>
                <li>Do experimental CAFI manipulations affect coral growth rates?</li>
                <li>What is the spatial variation in CAFI across reef sites?</li>
            </ul>

            <h3 style="font-family: 'Playfair Display', serif; font-size: 1.6em; color: var(--foam-white); margin: 40px 0 24px;">Contact & Citation</h3>

            <p style="font-size: 1.1em; color: var(--text-light); line-height: 2;">
                <strong style="color: var(--biolum-cyan);">Contact:</strong> Adrian C. Stier (astier@ucsb.edu)<br>
                <strong style="color: var(--biolum-cyan);">GitHub Issues:</strong> <a href="https://github.com/stier-lab/moorea-cafi-data/issues" target="_blank" style="color: var(--coral-pink);">Report issues or ask questions</a><br>
                <strong style="color: var(--biolum-cyan);">Citation:</strong> See CITATION.cff in repository
            </p>

            <div class="alert alert-success" style="margin-top: 40px;">
                <strong>Educational Use</strong>
                <p>This dataset is suitable for teaching community ecology, coral reef biology, experimental design, and data management. CC-BY-4.0 license permits use in courses.</p>
            </div>

            <!-- Quick Links to Additional Sections -->
            <h3 style="font-family: 'Playfair Display', serif; font-size: 1.6em; color: var(--foam-white); margin: 40px 0 24px;">Additional Resources</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-bottom: 40px;">
                <a href="#" onclick="showSection('map'); return false;" class="quick-link-card" style="background: linear-gradient(135deg, rgba(0, 245, 212, 0.1) 0%, rgba(0, 187, 249, 0.1) 100%); border: 1px solid rgba(0, 245, 212, 0.2); border-radius: 12px; padding: 20px; text-decoration: none; transition: all 0.3s ease;">
                    <div style="margin-bottom: 8px;"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--biolum-cyan)" stroke-width="1.5"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"/><circle cx="12" cy="10" r="3"/></svg></div>
                    <div style="color: var(--biolum-cyan); font-weight: 600;">Study Sites Map</div>
                    <div style="color: var(--text-muted); font-size: 0.9em;">Interactive Mo'orea map</div>
                </a>
                <a href="#" onclick="showSection('stats'); return false;" class="quick-link-card" style="background: linear-gradient(135deg, rgba(255, 107, 138, 0.1) 0%, rgba(255, 159, 122, 0.1) 100%); border: 1px solid rgba(255, 107, 138, 0.2); border-radius: 12px; padding: 20px; text-decoration: none; transition: all 0.3s ease;">
                    <div style="margin-bottom: 8px;"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--coral-pink)" stroke-width="1.5"><path d="M18 20V10"/><path d="M12 20V4"/><path d="M6 20v-6"/></svg></div>
                    <div style="color: var(--coral-pink); font-weight: 600;">Dataset Statistics</div>
                    <div style="color: var(--text-muted); font-size: 0.9em;">Charts and visualizations</div>
                </a>
                <a href="#" onclick="showSection('citation'); return false;" class="quick-link-card" style="background: linear-gradient(135deg, rgba(0, 187, 249, 0.1) 0%, rgba(0, 245, 212, 0.1) 100%); border: 1px solid rgba(0, 187, 249, 0.2); border-radius: 12px; padding: 20px; text-decoration: none; transition: all 0.3s ease;">
                    <div style="margin-bottom: 8px;"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--biolum-blue)" stroke-width="1.5"><path d="M6 9H4.5a2.5 2.5 0 010-5H6"/><path d="M18 9h1.5a2.5 2.5 0 000-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0012 0V2Z"/></svg></div>
                    <div style="color: var(--biolum-blue); font-weight: 600;">Cite This Dataset</div>
                    <div style="color: var(--text-muted); font-size: 0.9em;">APA, BibTeX formats</div>
                </a>
                <a href="#" onclick="showSection('downloads'); return false;" class="quick-link-card" style="background: linear-gradient(135deg, rgba(0, 245, 212, 0.1) 0%, rgba(255, 107, 138, 0.1) 100%); border: 1px solid rgba(0, 245, 212, 0.2); border-radius: 12px; padding: 20px; text-decoration: none; transition: all 0.3s ease;">
                    <div style="margin-bottom: 8px;"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--biolum-cyan)" stroke-width="1.5"><path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg></div>
                    <div style="color: var(--biolum-cyan); font-weight: 600;">Download Center</div>
                    <div style="color: var(--text-muted); font-size: 0.9em;">GitHub, ZIP, BCO-DMO</div>
                </a>
                <a href="#" onclick="showSection('funding'); return false;" class="quick-link-card" style="background: linear-gradient(135deg, rgba(255, 159, 122, 0.1) 0%, rgba(255, 107, 138, 0.1) 100%); border: 1px solid rgba(255, 159, 122, 0.2); border-radius: 12px; padding: 20px; text-decoration: none; transition: all 0.3s ease;">
                    <div style="margin-bottom: 8px;"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--coral-orange)" stroke-width="1.5"><path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 00-3-3.87"/><path d="M16 3.13a4 4 0 010 7.75"/></svg></div>
                    <div style="color: var(--coral-orange); font-weight: 600;">Funding & Team</div>
                    <div style="color: var(--text-muted); font-size: 0.9em;">NSF grants, researchers</div>
                </a>
            </div>

            <button class="back-btn" onclick="showNav()">&larr; Back to Menu</button>
        </section>

        <!-- Study Sites Map Section -->
        <section id="map" class="content-section">
            <div class="section-header">
                <span class="section-label">Geographic Context</span>
                <h2 class="section-title">Study Sites</h2>
                <p class="section-subtitle">Research locations around Mo'orea, French Polynesia</p>
            </div>

            <div style="background: linear-gradient(135deg, rgba(15, 40, 71, 0.6) 0%, rgba(26, 64, 102, 0.4) 100%); border: 1px solid rgba(0, 245, 212, 0.15); border-radius: 16px; padding: 32px; margin-bottom: 32px;">
                <p style="color: var(--text-light); margin-bottom: 16px;">Mo'orea is a volcanic island in the Society Islands of French Polynesia, located 17 km northwest of Tahiti. Our study sites span the island's backreef lagoons at 2-3m depth, where <em>Pocillopora</em> coral colonies thrive alongside their cryptic invertebrate communities.</p>
                <div style="display: flex; gap: 24px; flex-wrap: wrap; margin-top: 16px;">
                    <div style="flex: 1; min-width: 200px;">
                        <div style="color: var(--biolum-cyan); font-weight: 600; margin-bottom: 4px;">Location</div>
                        <div style="color: var(--text-muted);">17.5S, 149.8W</div>
                    </div>
                    <div style="flex: 1; min-width: 200px;">
                        <div style="color: var(--coral-pink); font-weight: 600; margin-bottom: 4px;">Time Zone</div>
                        <div style="color: var(--text-muted);">Tahiti Time (UTC-10)</div>
                    </div>
                    <div style="flex: 1; min-width: 200px;">
                        <div style="color: var(--coral-orange); font-weight: 600; margin-bottom: 4px;">Research Station</div>
                        <div style="color: var(--text-muted);">UC Berkeley Gump Station</div>
                    </div>
                </div>
            </div>

            <!-- D3 Map Container -->
            <div id="moorea-map" style="background: linear-gradient(135deg, rgba(10, 22, 40, 0.95) 0%, rgba(15, 40, 71, 0.9) 100%); border: 1px solid rgba(0, 245, 212, 0.2); border-radius: 16px; padding: 24px; margin-bottom: 32px; min-height: 500px; position: relative;">
                <svg id="map-svg" width="100%" height="450"></svg>
                <div id="map-tooltip" style="position: absolute; background: rgba(10, 22, 40, 0.95); border: 1px solid var(--biolum-cyan); border-radius: 8px; padding: 12px 16px; color: var(--text-light); font-size: 0.9em; pointer-events: none; opacity: 0; transition: opacity 0.2s; z-index: 100;"></div>
            </div>

            <!-- Site Details -->
            <h3 style="font-family: 'Playfair Display', serif; font-size: 1.6em; color: var(--foam-white); margin: 32px 0 24px;">Site Details</h3>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 24px;">
                <div style="background: linear-gradient(135deg, rgba(0, 245, 212, 0.08) 0%, rgba(0, 187, 249, 0.05) 100%); border: 1px solid rgba(0, 245, 212, 0.2); border-radius: 12px; padding: 24px;">
                    <h4 style="font-family: 'Playfair Display', serif; font-size: 1.2em; color: var(--biolum-cyan); margin-bottom: 12px;">MRB - North Shore Backreef</h4>
                    <div style="color: var(--text-muted); font-size: 0.95em; line-height: 1.8;">
                        <div><strong style="color: var(--text-light);">Coordinates:</strong> 17.4767S, 149.8137W</div>
                        <div><strong style="color: var(--text-light);">Depth:</strong> 2-3 m</div>
                        <div><strong style="color: var(--text-light);">Distance from crest:</strong> ~200 m</div>
                        <div><strong style="color: var(--text-light);">Study:</strong> MRB Amount Experiment</div>
                        <div style="margin-top: 8px;">North shore backreef near Maharepa township. Site of the CAFI density manipulation experiment with 54 coral colonies.</div>
                    </div>
                </div>
                <div style="background: linear-gradient(135deg, rgba(255, 107, 138, 0.08) 0%, rgba(255, 140, 66, 0.05) 100%); border: 1px solid rgba(255, 107, 138, 0.2); border-radius: 12px; padding: 24px;">
                    <h4 style="font-family: 'Playfair Display', serif; font-size: 1.2em; color: var(--coral-pink); margin-bottom: 12px;">Maatea - South Shore Backreef</h4>
                    <div style="color: var(--text-muted); font-size: 0.95em; line-height: 1.8;">
                        <div><strong style="color: var(--text-light);">Coordinates:</strong> 17.5996S, 149.8081W</div>
                        <div><strong style="color: var(--text-light);">Depth:</strong> 2-3 m</div>
                        <div><strong style="color: var(--text-light);">Distance from crest:</strong> ~300 m</div>
                        <div><strong style="color: var(--text-light);">Study:</strong> Maatea Size Experiment</div>
                        <div style="margin-top: 8px;">South shore backreef east of Atiha pass. Site of the coral size gradient experiment with 60 coral colonies.</div>
                    </div>
                </div>
                <div style="background: linear-gradient(135deg, rgba(0, 187, 249, 0.08) 0%, rgba(0, 245, 212, 0.05) 100%); border: 1px solid rgba(0, 187, 249, 0.2); border-radius: 12px; padding: 24px;">
                    <h4 style="font-family: 'Playfair Display', serif; font-size: 1.2em; color: var(--biolum-blue); margin-bottom: 12px;">Survey Sites - Island-wide</h4>
                    <div style="color: var(--text-muted); font-size: 0.95em; line-height: 1.8;">
                        <div><strong style="color: var(--text-light);">Locations:</strong> MRB, HAU, MAT</div>
                        <div><strong style="color: var(--text-light);">Depth:</strong> 2-3 m</div>
                        <div><strong style="color: var(--text-light);">Distance from crest:</strong> 30-150 m</div>
                        <div><strong style="color: var(--text-light);">Study:</strong> Mo'orea Survey</div>
                        <div style="margin-top: 8px;">Multiple backreef locations around the island sampling 114 coral colonies to characterize natural CAFI variation.</div>
                    </div>
                </div>
            </div>

            <button class="back-btn" onclick="showNav()">&larr; Back to Menu</button>
        </section>

        <!-- Statistics Dashboard Section -->
        <section id="stats" class="content-section">
            <div class="section-header">
                <span class="section-label">Data Summary</span>
                <h2 class="section-title">Dataset Statistics</h2>
                <p class="section-subtitle">Key numbers at a glance</p>
            </div>

            <!-- Key Stats Grid -->
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 20px; margin-bottom: 40px;">
                <div class="stat-highlight" style="background: linear-gradient(135deg, rgba(0, 245, 212, 0.15) 0%, rgba(0, 187, 249, 0.08) 100%); border: 1px solid rgba(0, 245, 212, 0.3); border-radius: 16px; padding: 28px; text-align: center;">
                    <div style="font-family: 'Playfair Display', serif; font-size: 2.8em; color: var(--biolum-cyan); font-weight: 600;">17,073</div>
                    <div style="color: var(--text-muted); margin-top: 8px;">CAFI Organisms</div>
                </div>
                <div class="stat-highlight" style="background: linear-gradient(135deg, rgba(255, 107, 138, 0.15) 0%, rgba(255, 140, 66, 0.08) 100%); border: 1px solid rgba(255, 107, 138, 0.3); border-radius: 16px; padding: 28px; text-align: center;">
                    <div style="font-family: 'Playfair Display', serif; font-size: 2.8em; color: var(--coral-pink); font-weight: 600;">228</div>
                    <div style="color: var(--text-muted); margin-top: 8px;">Coral Colonies</div>
                </div>
                <div class="stat-highlight" style="background: linear-gradient(135deg, rgba(0, 187, 249, 0.15) 0%, rgba(0, 245, 212, 0.08) 100%); border: 1px solid rgba(0, 187, 249, 0.3); border-radius: 16px; padding: 28px; text-align: center;">
                    <div style="font-family: 'Playfair Display', serif; font-size: 2.8em; color: var(--biolum-blue); font-weight: 600;">~150</div>
                    <div style="color: var(--text-muted); margin-top: 8px;">Species Identified</div>
                </div>
                <div class="stat-highlight" style="background: linear-gradient(135deg, rgba(255, 140, 66, 0.15) 0%, rgba(255, 107, 138, 0.08) 100%); border: 1px solid rgba(255, 140, 66, 0.3); border-radius: 16px; padding: 28px; text-align: center;">
                    <div style="font-family: 'Playfair Display', serif; font-size: 2.8em; color: var(--coral-orange); font-weight: 600;">23</div>
                    <div style="color: var(--text-muted); margin-top: 8px;">Data Files</div>
                </div>
            </div>

            <!-- D3 Charts -->
            <h3 style="font-family: 'Playfair Display', serif; font-size: 1.6em; color: var(--foam-white); margin: 40px 0 24px;">CAFI Distribution by Study</h3>
            <div id="study-chart" style="background: linear-gradient(135deg, rgba(10, 22, 40, 0.95) 0%, rgba(15, 40, 71, 0.9) 100%); border: 1px solid rgba(0, 245, 212, 0.2); border-radius: 16px; padding: 32px; margin-bottom: 32px;">
                <svg id="study-bar-chart" width="100%" height="300"></svg>
            </div>

            <h3 style="font-family: 'Playfair Display', serif; font-size: 1.6em; color: var(--foam-white); margin: 40px 0 24px;">Taxonomic Composition</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 32px;">
                <div id="taxa-pie-container" style="background: linear-gradient(135deg, rgba(10, 22, 40, 0.95) 0%, rgba(15, 40, 71, 0.9) 100%); border: 1px solid rgba(0, 245, 212, 0.2); border-radius: 16px; padding: 32px;">
                    <h4 style="color: var(--foam-white); margin-bottom: 16px; text-align: center;">Major Taxonomic Groups</h4>
                    <svg id="taxa-pie-chart" width="100%" height="300"></svg>
                </div>
                <div id="timeline-container" style="background: linear-gradient(135deg, rgba(10, 22, 40, 0.95) 0%, rgba(15, 40, 71, 0.9) 100%); border: 1px solid rgba(0, 245, 212, 0.2); border-radius: 16px; padding: 32px;">
                    <h4 style="color: var(--foam-white); margin-bottom: 16px; text-align: center;">Sampling Timeline</h4>
                    <svg id="timeline-chart" width="100%" height="300"></svg>
                </div>
            </div>

            <!-- Data Quality Stats -->
            <h3 style="font-family: 'Playfair Display', serif; font-size: 1.6em; color: var(--foam-white); margin: 48px 0 24px;">Data Quality</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                <div style="background: rgba(0, 0, 0, 0.2); border-radius: 12px; padding: 20px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                        <span style="color: var(--text-light);">Species-level ID</span>
                        <span style="color: var(--biolum-cyan); font-weight: 600;">82%</span>
                    </div>
                    <div style="background: rgba(255,255,255,0.1); border-radius: 4px; height: 8px; overflow: hidden;">
                        <div style="background: linear-gradient(90deg, var(--biolum-cyan), var(--biolum-blue)); width: 82%; height: 100%; border-radius: 4px;"></div>
                    </div>
                </div>
                <div style="background: rgba(0, 0, 0, 0.2); border-radius: 12px; padding: 20px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                        <span style="color: var(--text-light);">Genus-level ID</span>
                        <span style="color: var(--coral-pink); font-weight: 600;">95%</span>
                    </div>
                    <div style="background: rgba(255,255,255,0.1); border-radius: 4px; height: 8px; overflow: hidden;">
                        <div style="background: linear-gradient(90deg, var(--coral-pink), var(--coral-orange)); width: 95%; height: 100%; border-radius: 4px;"></div>
                    </div>
                </div>
                <div style="background: rgba(0, 0, 0, 0.2); border-radius: 12px; padding: 20px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                        <span style="color: var(--text-light);">Complete Records</span>
                        <span style="color: var(--biolum-blue); font-weight: 600;">98%</span>
                    </div>
                    <div style="background: rgba(255,255,255,0.1); border-radius: 4px; height: 8px; overflow: hidden;">
                        <div style="background: linear-gradient(90deg, var(--biolum-blue), var(--biolum-cyan)); width: 98%; height: 100%; border-radius: 4px;"></div>
                    </div>
                </div>
            </div>

            <button class="back-btn" onclick="showNav()">&larr; Back to Menu</button>
        </section>

        <!-- Citation Section -->
        <section id="citation" class="content-section">
            <div class="section-header">
                <span class="section-label">Attribution</span>
                <h2 class="section-title">Cite This Dataset</h2>
                <p class="section-subtitle">Please cite when using this data in publications</p>
            </div>

            <div style="background: linear-gradient(135deg, rgba(15, 40, 71, 0.6) 0%, rgba(26, 64, 102, 0.4) 100%); border: 1px solid rgba(0, 245, 212, 0.15); border-radius: 16px; padding: 32px; margin-bottom: 32px;">
                <p style="color: var(--text-light); margin-bottom: 16px;">If you use data from this repository, please cite the dataset and any associated publications. Click the format you need to copy the citation to your clipboard.</p>
            </div>

            <!-- Citation Formats -->
            <h3 style="font-family: 'Playfair Display', serif; font-size: 1.4em; color: var(--foam-white); margin-bottom: 20px;">Dataset Citation</h3>

            <div class="citation-box" style="background: rgba(0, 0, 0, 0.3); border: 1px solid rgba(0, 245, 212, 0.2); border-radius: 12px; padding: 24px; margin-bottom: 16px; position: relative;">
                <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 12px;">
                    <span style="background: var(--biolum-cyan); color: var(--ocean-deep); padding: 4px 12px; border-radius: 4px; font-size: 0.85em; font-weight: 600;">APA</span>
                    <button onclick="copyToClipboard('citation-apa')" style="background: transparent; border: 1px solid var(--biolum-cyan); color: var(--biolum-cyan); padding: 6px 16px; border-radius: 6px; cursor: pointer; font-size: 0.85em; transition: all 0.3s;">Copy</button>
                </div>
                <p id="citation-apa" style="color: var(--text-light); font-size: 0.95em; line-height: 1.7;">Stier, A. C., & Osenberg, C. W. (2024). <em>Cryptic coral-associated fauna and invertebrate (CAFI) communities of Mo'orea, French Polynesia (2019-2021)</em> [Data set]. BCO-DMO. https://doi.org/[pending]</p>
            </div>

            <div class="citation-box" style="background: rgba(0, 0, 0, 0.3); border: 1px solid rgba(255, 107, 138, 0.2); border-radius: 12px; padding: 24px; margin-bottom: 16px; position: relative;">
                <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 12px;">
                    <span style="background: var(--coral-pink); color: var(--ocean-deep); padding: 4px 12px; border-radius: 4px; font-size: 0.85em; font-weight: 600;">BibTeX</span>
                    <button onclick="copyToClipboard('citation-bibtex')" style="background: transparent; border: 1px solid var(--coral-pink); color: var(--coral-pink); padding: 6px 16px; border-radius: 6px; cursor: pointer; font-size: 0.85em; transition: all 0.3s;">Copy</button>
                </div>
                <pre id="citation-bibtex" style="color: var(--text-light); font-family: 'JetBrains Mono', monospace; font-size: 0.85em; line-height: 1.6; white-space: pre-wrap; margin: 0;">@dataset{stier_osenberg_2024_cafi,
  author = {Stier, Adrian C. and Osenberg, Craig W.},
  title = {Cryptic coral-associated fauna and invertebrate (CAFI) communities of Mo'orea, French Polynesia (2019-2021)},
  year = {2024},
  publisher = {BCO-DMO},
  doi = {pending},
  url = {https://github.com/stier-lab/moorea-cafi-data}
}</pre>
            </div>

            <div class="citation-box" style="background: rgba(0, 0, 0, 0.3); border: 1px solid rgba(0, 187, 249, 0.2); border-radius: 12px; padding: 24px; margin-bottom: 32px; position: relative;">
                <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 12px;">
                    <span style="background: var(--biolum-blue); color: var(--ocean-deep); padding: 4px 12px; border-radius: 4px; font-size: 0.85em; font-weight: 600;">Chicago</span>
                    <button onclick="copyToClipboard('citation-chicago')" style="background: transparent; border: 1px solid var(--biolum-blue); color: var(--biolum-blue); padding: 6px 16px; border-radius: 6px; cursor: pointer; font-size: 0.85em; transition: all 0.3s;">Copy</button>
                </div>
                <p id="citation-chicago" style="color: var(--text-light); font-size: 0.95em; line-height: 1.7;">Stier, Adrian C., and Craig W. Osenberg. "Cryptic Coral-Associated Fauna and Invertebrate (CAFI) Communities of Mo'orea, French Polynesia (2019-2021)." BCO-DMO, 2024. https://doi.org/[pending].</p>
            </div>

            <!-- ORCID Info -->
            <h3 style="font-family: 'Playfair Display', serif; font-size: 1.4em; color: var(--foam-white); margin: 40px 0 20px;">Author ORCID IDs</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px;">
                <div style="background: rgba(0, 0, 0, 0.2); border-radius: 12px; padding: 20px; display: flex; align-items: center; gap: 16px;">
                    <div style="width: 50px; height: 50px; background: linear-gradient(135deg, var(--biolum-cyan), var(--biolum-blue)); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: var(--ocean-deep); font-weight: 700; font-size: 1.2em;">AS</div>
                    <div>
                        <div style="color: var(--text-light); font-weight: 500;">Adrian C. Stier</div>
                        <a href="https://orcid.org/0000-0002-5075-5759" target="_blank" style="color: var(--biolum-cyan); font-size: 0.9em; text-decoration: none;">0000-0002-5075-5759</a>
                    </div>
                </div>
                <div style="background: rgba(0, 0, 0, 0.2); border-radius: 12px; padding: 20px; display: flex; align-items: center; gap: 16px;">
                    <div style="width: 50px; height: 50px; background: linear-gradient(135deg, var(--coral-pink), var(--coral-orange)); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: var(--ocean-deep); font-weight: 700; font-size: 1.2em;">CO</div>
                    <div>
                        <div style="color: var(--text-light); font-weight: 500;">Craig W. Osenberg</div>
                        <a href="https://orcid.org/0000-0002-9519-9525" target="_blank" style="color: var(--coral-pink); font-size: 0.9em; text-decoration: none;">0000-0002-9519-9525</a>
                    </div>
                </div>
            </div>

            <button class="back-btn" onclick="showNav()">&larr; Back to Menu</button>
        </section>

        <!-- Downloads Section -->
        <section id="downloads" class="content-section">
            <div class="section-header">
                <span class="section-label">Get the Data</span>
                <h2 class="section-title">Download Center</h2>
                <p class="section-subtitle">Multiple ways to access the complete dataset</p>
            </div>

            <!-- Download Options -->
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 24px; margin-bottom: 40px;">
                <div style="background: linear-gradient(135deg, rgba(0, 245, 212, 0.1) 0%, rgba(0, 187, 249, 0.05) 100%); border: 2px solid rgba(0, 245, 212, 0.3); border-radius: 16px; padding: 32px; text-align: center;">
                    <div style="width: 64px; height: 64px; margin: 0 auto 20px; background: linear-gradient(135deg, var(--biolum-cyan), var(--biolum-blue)); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="var(--ocean-deep)" stroke-width="2"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/></svg>
                    </div>
                    <h4 style="font-family: 'Playfair Display', serif; font-size: 1.3em; color: var(--biolum-cyan); margin-bottom: 12px;">Clone Repository</h4>
                    <p style="color: var(--text-muted); margin-bottom: 20px; font-size: 0.95em;">Get the complete repository with version control</p>
                    <code style="display: block; background: rgba(0,0,0,0.3); padding: 12px; border-radius: 8px; color: var(--biolum-cyan); font-size: 0.85em; margin-bottom: 16px;">git clone https://github.com/stier-lab/moorea-cafi-data.git</code>
                    <a href="https://github.com/stier-lab/moorea-cafi-data" target="_blank" style="display: inline-block; background: var(--biolum-cyan); color: var(--ocean-deep); padding: 12px 24px; border-radius: 8px; text-decoration: none; font-weight: 600;">View on GitHub</a>
                </div>

                <div style="background: linear-gradient(135deg, rgba(255, 107, 138, 0.1) 0%, rgba(255, 140, 66, 0.05) 100%); border: 2px solid rgba(255, 107, 138, 0.3); border-radius: 16px; padding: 32px; text-align: center;">
                    <div style="width: 64px; height: 64px; margin: 0 auto 20px; background: linear-gradient(135deg, var(--coral-pink), var(--coral-orange)); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="var(--ocean-deep)" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
                    </div>
                    <h4 style="font-family: 'Playfair Display', serif; font-size: 1.3em; color: var(--coral-pink); margin-bottom: 12px;">Download ZIP</h4>
                    <p style="color: var(--text-muted); margin-bottom: 20px; font-size: 0.95em;">Download all files as a single archive</p>
                    <div style="color: var(--text-muted); font-size: 0.85em; margin-bottom: 16px;">~25 MB (23 data files + metadata)</div>
                    <a href="https://github.com/stier-lab/moorea-cafi-data/archive/refs/heads/main.zip" style="display: inline-block; background: var(--coral-pink); color: var(--ocean-deep); padding: 12px 24px; border-radius: 8px; text-decoration: none; font-weight: 600;">Download ZIP</a>
                </div>

                <div style="background: linear-gradient(135deg, rgba(0, 187, 249, 0.1) 0%, rgba(0, 245, 212, 0.05) 100%); border: 2px solid rgba(0, 187, 249, 0.3); border-radius: 16px; padding: 32px; text-align: center;">
                    <div style="width: 64px; height: 64px; margin: 0 auto 20px; background: linear-gradient(135deg, var(--biolum-blue), var(--biolum-cyan)); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="var(--ocean-deep)" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>
                    </div>
                    <h4 style="font-family: 'Playfair Display', serif; font-size: 1.3em; color: var(--biolum-blue); margin-bottom: 12px;">BCO-DMO (Coming Soon)</h4>
                    <p style="color: var(--text-muted); margin-bottom: 20px; font-size: 0.95em;">Official archived version with DOI</p>
                    <div style="color: var(--text-muted); font-size: 0.85em; margin-bottom: 16px;">DOI pending submission</div>
                    <span style="display: inline-block; background: rgba(0,187,249,0.2); color: var(--biolum-blue); padding: 12px 24px; border-radius: 8px; font-weight: 600;">Submission in Progress</span>
                </div>
            </div>

            <!-- Download by Study -->
            <h3 style="font-family: 'Playfair Display', serif; font-size: 1.4em; color: var(--foam-white); margin: 40px 0 20px;">Download by Study</h3>
            <div style="background: rgba(0, 0, 0, 0.2); border-radius: 12px; overflow: hidden;">
                <table style="width: 100%; border-collapse: collapse;">
                    <thead>
                        <tr style="background: rgba(0, 245, 212, 0.1);">
                            <th style="padding: 16px 20px; text-align: left; color: var(--text-light); font-weight: 600;">Study</th>
                            <th style="padding: 16px 20px; text-align: center; color: var(--text-light); font-weight: 600;">Files</th>
                            <th style="padding: 16px 20px; text-align: center; color: var(--text-light); font-weight: 600;">Corals</th>
                            <th style="padding: 16px 20px; text-align: right; color: var(--text-light); font-weight: 600;">Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr style="border-top: 1px solid rgba(255,255,255,0.05);">
                            <td style="padding: 16px 20px; color: var(--text-light);">Maatea Size Experiment</td>
                            <td style="padding: 16px 20px; text-align: center; color: var(--text-muted);">8</td>
                            <td style="padding: 16px 20px; text-align: center; color: var(--text-muted);">60</td>
                            <td style="padding: 16px 20px; text-align: right;"><a href="#" onclick="showSection('files'); return false;" style="color: var(--biolum-cyan); text-decoration: none;">View Files </a></td>
                        </tr>
                        <tr style="border-top: 1px solid rgba(255,255,255,0.05);">
                            <td style="padding: 16px 20px; color: var(--text-light);">MRB Amount Experiment</td>
                            <td style="padding: 16px 20px; text-align: center; color: var(--text-muted);">10</td>
                            <td style="padding: 16px 20px; text-align: center; color: var(--text-muted);">54</td>
                            <td style="padding: 16px 20px; text-align: right;"><a href="#" onclick="showSection('files'); return false;" style="color: var(--biolum-cyan); text-decoration: none;">View Files </a></td>
                        </tr>
                        <tr style="border-top: 1px solid rgba(255,255,255,0.05);">
                            <td style="padding: 16px 20px; color: var(--text-light);">Mo'orea Survey</td>
                            <td style="padding: 16px 20px; text-align: center; color: var(--text-muted);">5</td>
                            <td style="padding: 16px 20px; text-align: center; color: var(--text-muted);">114</td>
                            <td style="padding: 16px 20px; text-align: right;"><a href="#" onclick="showSection('files'); return false;" style="color: var(--biolum-cyan); text-decoration: none;">View Files </a></td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <button class="back-btn" onclick="showNav()">&larr; Back to Menu</button>
        </section>

        <!-- Funding & Acknowledgments Section -->
        <section id="funding" class="content-section">
            <div class="section-header">
                <span class="section-label">Support</span>
                <h2 class="section-title">Funding & Acknowledgments</h2>
                <p class="section-subtitle">Research support and institutional partners</p>
            </div>

            <!-- NSF Funding -->
            <div style="background: linear-gradient(135deg, rgba(0, 245, 212, 0.08) 0%, rgba(0, 187, 249, 0.05) 100%); border: 1px solid rgba(0, 245, 212, 0.2); border-radius: 16px; padding: 32px; margin-bottom: 32px;">
                <div style="display: flex; align-items: center; gap: 24px; flex-wrap: wrap;">
                    <div style="width: 80px; height: 80px; background: white; border-radius: 12px; display: flex; align-items: center; justify-content: center; padding: 12px;">
                        <svg viewBox="0 0 100 100" width="56" height="56">
                            <circle cx="50" cy="50" r="48" fill="#003366"/>
                            <text x="50" y="58" text-anchor="middle" fill="white" font-size="24" font-weight="bold">NSF</text>
                        </svg>
                    </div>
                    <div style="flex: 1; min-width: 250px;">
                        <h4 style="font-family: 'Playfair Display', serif; font-size: 1.3em; color: var(--biolum-cyan); margin-bottom: 8px;">National Science Foundation</h4>
                        <p style="color: var(--text-light); margin-bottom: 12px;">This research was funded by NSF Ocean Sciences Division</p>
                        <div style="display: flex; gap: 16px; flex-wrap: wrap;">
                            <div style="background: rgba(0,0,0,0.2); padding: 8px 16px; border-radius: 6px;">
                                <span style="color: var(--text-muted); font-size: 0.85em;">Grant</span>
                                <div style="color: var(--biolum-cyan); font-weight: 600;">OCE-1851510</div>
                            </div>
                            <div style="background: rgba(0,0,0,0.2); padding: 8px 16px; border-radius: 6px;">
                                <span style="color: var(--text-muted); font-size: 0.85em;">Grant</span>
                                <div style="color: var(--biolum-cyan); font-weight: 600;">OCE-1851032</div>
                            </div>
                            <div style="background: rgba(0,0,0,0.2); padding: 8px 16px; border-radius: 6px;">
                                <span style="color: var(--text-muted); font-size: 0.85em;">Period</span>
                                <div style="color: var(--text-light); font-weight: 600;">2019-2025</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Research Team -->
            <h3 style="font-family: 'Playfair Display', serif; font-size: 1.4em; color: var(--foam-white); margin: 40px 0 20px;">Research Team</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin-bottom: 40px;">
                <div style="background: rgba(0, 0, 0, 0.2); border-radius: 12px; padding: 24px;">
                    <div style="color: var(--biolum-cyan); font-size: 0.85em; font-weight: 600; margin-bottom: 8px;">Principal Investigator</div>
                    <h4 style="color: var(--text-light); font-size: 1.1em; margin-bottom: 4px;">Adrian C. Stier</h4>
                    <p style="color: var(--text-muted); font-size: 0.9em;">UC Santa Barbara</p>
                    <a href="mailto:astier@ucsb.edu" style="color: var(--biolum-cyan); font-size: 0.9em; text-decoration: none;">astier@ucsb.edu</a>
                </div>
                <div style="background: rgba(0, 0, 0, 0.2); border-radius: 12px; padding: 24px;">
                    <div style="color: var(--coral-pink); font-size: 0.85em; font-weight: 600; margin-bottom: 8px;">Co-Principal Investigator</div>
                    <h4 style="color: var(--text-light); font-size: 1.1em; margin-bottom: 4px;">Craig W. Osenberg</h4>
                    <p style="color: var(--text-muted); font-size: 0.9em;">University of Georgia</p>
                    <a href="mailto:osenberg@uga.edu" style="color: var(--coral-pink); font-size: 0.9em; text-decoration: none;">osenberg@uga.edu</a>
                </div>
                <div style="background: rgba(0, 0, 0, 0.2); border-radius: 12px; padding: 24px;">
                    <div style="color: var(--biolum-blue); font-size: 0.85em; font-weight: 600; margin-bottom: 8px;">Field Technician</div>
                    <h4 style="color: var(--text-light); font-size: 1.1em; margin-bottom: 4px;">Joseph Curtis</h4>
                    <p style="color: var(--text-muted); font-size: 0.9em;">UC Santa Barbara</p>
                </div>
                <div style="background: rgba(0, 0, 0, 0.2); border-radius: 12px; padding: 24px;">
                    <div style="color: var(--coral-orange); font-size: 0.85em; font-weight: 600; margin-bottom: 8px;">Graduate Student Researcher</div>
                    <h4 style="color: var(--text-light); font-size: 1.1em; margin-bottom: 4px;">Alex Primo</h4>
                    <p style="color: var(--text-muted); font-size: 0.9em;">University of Georgia</p>
                </div>
            </div>

            <!-- Institutional Partners -->
            <h3 style="font-family: 'Playfair Display', serif; font-size: 1.4em; color: var(--foam-white); margin: 40px 0 20px;">Institutional Partners</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                <div style="background: rgba(0, 0, 0, 0.2); border-radius: 12px; padding: 24px; text-align: center;">
                    <h4 style="color: var(--text-light); margin-bottom: 8px;">UC Berkeley Gump Station</h4>
                    <p style="color: var(--text-muted); font-size: 0.9em;">Richard B. Gump South Pacific Research Station, Mo'orea</p>
                </div>
                <div style="background: rgba(0, 0, 0, 0.2); border-radius: 12px; padding: 24px; text-align: center;">
                    <h4 style="color: var(--text-light); margin-bottom: 8px;">Mo'orea Coral Reef LTER</h4>
                    <p style="color: var(--text-muted); font-size: 0.9em;">Long Term Ecological Research site</p>
                </div>
                <div style="background: rgba(0, 0, 0, 0.2); border-radius: 12px; padding: 24px; text-align: center;">
                    <h4 style="color: var(--text-light); margin-bottom: 8px;">BCO-DMO</h4>
                    <p style="color: var(--text-muted); font-size: 0.9em;">Biological & Chemical Oceanography Data Management Office</p>
                </div>
            </div>

            <div class="alert alert-info" style="margin-top: 40px;">
                <strong>License</strong>
                <p>This dataset is released under the <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank" style="color: var(--biolum-cyan);">Creative Commons Attribution 4.0 International (CC-BY-4.0)</a> license. You are free to share and adapt this data for any purpose, provided you give appropriate credit.</p>
            </div>

            <button class="back-btn" onclick="showNav()">&larr; Back to Menu</button>
        </section>
    </div>

    <!-- Lightbox -->
    <div class="lightbox" id="lightbox" onclick="closeLightbox()">
        <span class="lightbox-close">&times;</span>
        <img id="lightbox-img" src="" alt="Full size image">
        <div class="lightbox-caption" id="lightbox-caption"></div>
    </div>

    <!-- Scroll to top -->
    <div class="scroll-top" id="scrollTop" onclick="scrollToTop()">
        &uarr;
    </div>

    <script>
        // Mobile menu functions
        function toggleMobileMenu() {
            const navLinks = document.getElementById('navLinks');
            const mobileBtn = document.getElementById('mobileMenuBtn');
            const overlay = document.getElementById('mobileOverlay');

            navLinks.classList.toggle('active');
            mobileBtn.classList.toggle('active');
            overlay.classList.toggle('active');
            document.body.style.overflow = navLinks.classList.contains('active') ? 'hidden' : '';
        }

        function closeMobileMenu() {
            const navLinks = document.getElementById('navLinks');
            const mobileBtn = document.getElementById('mobileMenuBtn');
            const overlay = document.getElementById('mobileOverlay');

            navLinks.classList.remove('active');
            mobileBtn.classList.remove('active');
            overlay.classList.remove('active');
            document.body.style.overflow = '';
        }

        // Create floating particles
        function createParticles() {
            const container = document.getElementById('particles');
            const particleCount = 30;

            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDuration = (Math.random() * 20 + 15) + 's';
                particle.style.animationDelay = Math.random() * 20 + 's';
                particle.style.width = (Math.random() * 4 + 2) + 'px';
                particle.style.height = particle.style.width;
                container.appendChild(particle);
            }
        }

        createParticles();

        // Navigation scroll effect
        window.addEventListener('scroll', function() {
            const nav = document.getElementById('nav');
            const scrollTop = document.getElementById('scrollTop');

            if (window.scrollY > 100) {
                nav.classList.add('scrolled');
            } else {
                nav.classList.remove('scrolled');
            }

            if (window.scrollY > 400) {
                scrollTop.classList.add('visible');
            } else {
                scrollTop.classList.remove('visible');
            }
        });

        function showSection(sectionId) {
            const sections = document.querySelectorAll('.content-section');
            sections.forEach(section => section.classList.remove('active'));

            document.getElementById('navCards').style.display = 'none';
            document.getElementById('hero').style.display = 'none';

            const targetSection = document.getElementById(sectionId);
            if (targetSection) {
                targetSection.classList.add('active');
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }

            // Update nav active state
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
                if (link.dataset.section === sectionId) {
                    link.classList.add('active');
                }
            });
        }

        function showNav() {
            const sections = document.querySelectorAll('.content-section');
            sections.forEach(section => section.classList.remove('active'));

            document.getElementById('navCards').style.display = 'grid';
            document.getElementById('hero').style.display = 'flex';

            window.scrollTo({ top: 0, behavior: 'smooth' });

            document.querySelectorAll('.nav-link').forEach(link => link.classList.remove('active'));
        }

        function openLightbox(imageSrc, caption = '') {
            const lightbox = document.getElementById('lightbox');
            const lightboxImg = document.getElementById('lightbox-img');
            const lightboxCaption = document.getElementById('lightbox-caption');

            lightboxImg.src = imageSrc;
            lightboxCaption.textContent = caption;
            lightboxCaption.style.display = caption ? 'block' : 'none';

            lightbox.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeLightbox() {
            const lightbox = document.getElementById('lightbox');
            lightbox.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        function scrollToTop() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Keyboard support
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeLightbox();
            }
        });

        // Prevent lightbox close when clicking image
        document.getElementById('lightbox-img').addEventListener('click', function(event) {
            event.stopPropagation();
        });

        // Lazy load images with fade effect
        document.addEventListener('DOMContentLoaded', function() {
            const lazyImages = document.querySelectorAll('img[loading="lazy"]');

            if ('IntersectionObserver' in window) {
                const imageObserver = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.style.opacity = '1';
                            imageObserver.unobserve(entry.target);
                        }
                    });
                });

                lazyImages.forEach(img => {
                    img.style.opacity = '0';
                    img.style.transition = 'opacity 0.5s ease';
                    imageObserver.observe(img);
                    img.addEventListener('load', () => {
                        img.style.opacity = '1';
                    });
                });
            }
        });

        // Animate elements on scroll
        if ('IntersectionObserver' in window) {
            const animateObserver = new IntersectionObserver((entries) => {
                entries.forEach((entry, index) => {
                    if (entry.isIntersecting) {
                        setTimeout(() => {
                            entry.target.style.opacity = '1';
                            entry.target.style.transform = 'translateY(0)';
                        }, index * 100);
                        animateObserver.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.1 });

            window.addEventListener('load', () => {
                document.querySelectorAll('.photo-card, .stat-card, .taxa-item, .file-card').forEach(el => {
                    el.style.opacity = '0';
                    el.style.transform = 'translateY(20px)';
                    el.style.transition = 'all 0.5s ease';
                    animateObserver.observe(el);
                });
            });
        }

        // ============================================
        // Copy to Clipboard Function
        // ============================================
        function copyToClipboard(elementId) {
            const element = document.getElementById(elementId);
            const text = element.innerText || element.textContent;

            navigator.clipboard.writeText(text).then(() => {
                // Find the button and show feedback
                const button = element.closest('.citation-box').querySelector('button');
                const originalText = button.textContent;
                button.textContent = 'Copied!';
                button.style.background = 'var(--biolum-cyan)';
                button.style.color = 'var(--ocean-deep)';

                setTimeout(() => {
                    button.textContent = originalText;
                    button.style.background = 'transparent';
                    button.style.color = button.style.borderColor;
                }, 2000);
            }).catch(err => {
                console.error('Failed to copy:', err);
                // Fallback for older browsers
                const textarea = document.createElement('textarea');
                textarea.value = text;
                document.body.appendChild(textarea);
                textarea.select();
                document.execCommand('copy');
                document.body.removeChild(textarea);
            });
        }

        // ============================================
        // D3 Visualizations
        // ============================================

        // Track which charts have been initialized
        const chartsInitialized = {
            map: false,
            stats: false
        };

        // Initialize D3 visualizations when their sections become visible
        const originalShowSection = showSection;
        showSection = function(sectionId) {
            originalShowSection(sectionId);

            // Initialize charts when their section becomes visible
            setTimeout(() => {
                if (sectionId === 'map' && !chartsInitialized.map) {
                    initMooreaMap();
                    chartsInitialized.map = true;
                }
                if (sectionId === 'stats' && !chartsInitialized.stats) {
                    initStudyBarChart();
                    initTaxaPieChart();
                    initTimelineChart();
                    chartsInitialized.stats = true;
                }
            }, 100);
        };

        // ============================================
        // Mo'orea Island Map
        // ============================================
        function initMooreaMap() {
            const container = document.getElementById('moorea-map');
            if (!container) return;

            const svg = d3.select('#map-svg');
            const tooltip = d3.select('#map-tooltip');

            // Get container dimensions (use fallback if section is hidden)
            const containerWidth = container.clientWidth || 800;
            const width = Math.max(containerWidth - 48, 400);
            const height = 450;

            svg.attr('width', width).attr('height', height);

            // Study site data
            const sites = [
                {
                    name: 'MRB - North Shore Backreef',
                    lat: -17.476703,
                    lon: -149.813681,
                    study: 'MRB Amount Experiment',
                    colonies: 54,
                    depth: '2-3m',
                    color: '#00f5d4'
                },
                {
                    name: 'Maatea - South Shore Backreef',
                    lat: -17.599607,
                    lon: -149.808107,
                    study: 'Maatea Size Experiment',
                    colonies: 60,
                    depth: '2-3m',
                    color: '#ff6b8a'
                },
                {
                    name: 'HAU Survey Site',
                    lat: -17.48,
                    lon: -149.86,
                    study: 'Mo\'orea Survey',
                    colonies: 38,
                    depth: '2-3m',
                    color: '#00bbf9'
                }
            ];

            // Mo'orea island GeoJSON from OpenStreetMap ( OpenStreetMap contributors)
            const moorea = {"type": "Feature", "properties": {"name": "Moorea", "osm_id": 10045248}, "geometry": {"type": "Polygon", "coordinates": [[[-149.9159383, -17.5033716], [-149.915631, -17.506648], [-149.915098, -17.5089174], [-149.914814, -17.5106299], [-149.9152579, -17.5116419], [-149.9148544, -17.5129516], [-149.913311, -17.5147835], [-149.9122906, -17.5169772], [-149.9125466, -17.519574], [-149.9115554, -17.523312], [-149.9105657, -17.524745], [-149.9083372, -17.5267132], [-149.9072179, -17.5282221], [-149.9062034, -17.5300415], [-149.9045851, -17.5319532], [-149.9044929, -17.5335171], [-149.9031062, -17.5349512], [-149.9035845, -17.5363049], [-149.9019969, -17.5377611], [-149.8997298, -17.5400981], [-149.8971514, -17.541574], [-149.8945433, -17.5431302], [-149.8909481, -17.5456113], [-149.8887242, -17.5472284], [-149.8856324, -17.5484963], [-149.883127, -17.5502549], [-149.8809877, -17.55157], [-149.8806795, -17.5519519], [-149.8796519, -17.554428], [-149.8773189, -17.5557795], [-149.8741482, -17.5563482], [-149.8729291, -17.5584851], [-149.871973, -17.5598082], [-149.8720077, -17.5615189], [-149.8713662, -17.5635965], [-149.8705941, -17.5652294], [-149.869315, -17.5665081], [-149.8677057, -17.5686874], [-149.8669607, -17.5695722], [-149.8661904, -17.5707213], [-149.8669144, -17.5717627], [-149.8660584, -17.5722922], [-149.8641764, -17.5730467], [-149.8622565, -17.5743963], [-149.8611022, -17.5756403], [-149.8594139, -17.577381], [-149.8571157, -17.5783453], [-149.8563776, -17.5770578], [-149.8544486, -17.5755052], [-149.854382, -17.5760711], [-149.8532326, -17.578621], [-149.852103, -17.5809435], [-149.8524545, -17.5825745], [-149.851716, -17.5846774], [-149.8504715, -17.5858739], [-149.8488373, -17.5864955], [-149.8474789, -17.5862474], [-149.8460715, -17.5850204], [-149.8448987, -17.583066], [-149.8436489, -17.5816029], [-149.8422808, -17.5819372], [-149.841714, -17.5841136], [-149.8416668, -17.5858788], [-149.8413295, -17.5860789], [-149.8399452, -17.5869967], [-149.8395462, -17.5886115], [-149.8404996, -17.5898501], [-149.8391688, -17.5907796], [-149.8379239, -17.5917019], [-149.8363038, -17.5917513], [-149.8340196, -17.5914091], [-149.8308726, -17.5914203], [-149.8280024, -17.5914953], [-149.8257059, -17.5920917], [-149.8238883, -17.5930879], [-149.8216984, -17.5931597], [-149.8192225, -17.5922872], [-149.8164532, -17.5916935], [-149.8124264, -17.5917179], [-149.8096239, -17.5921676], [-149.8070023, -17.5915189], [-149.805015, -17.5905688], [-149.8053214, -17.5890454], [-149.8068596, -17.5877168], [-149.8076545, -17.586876], [-149.8056056, -17.5861865], [-149.8039412, -17.5844167], [-149.8014405, -17.5842962], [-149.8001774, -17.5831519], [-149.7990934, -17.5821841], [-149.7983095, -17.58066], [-149.7975464, -17.5786111], [-149.7970583, -17.5770935], [-149.7973794, -17.5748402], [-149.796694, -17.5730911], [-149.7960592, -17.5713293], [-149.7948074, -17.5705533], [-149.7932486, -17.5701363], [-149.7927344, -17.5694257], [-149.7932566, -17.5681824], [-149.7939342, -17.5668604], [-149.7932865, -17.5658847], [-149.7925884, -17.5649289], [-149.7918, -17.5631732], [-149.7907131, -17.56236], [-149.7899847, -17.5606903], [-149.7894082, -17.5592111], [-149.7891301, -17.558268], [-149.7887101, -17.5569488], [-149.7892429, -17.5557021], [-149.790133, -17.5541839], [-149.7888527, -17.5533692], [-149.7898713, -17.5522865], [-149.7895132, -17.550107], [-149.7878419, -17.5497577], [-149.7866834, -17.550137], [-149.7856015, -17.549895], [-149.7846046, -17.5486238], [-149.7827727, -17.5478539], [-149.7816365, -17.5471928], [-149.780503, -17.5459175], [-149.7787553, -17.5449148], [-149.7771668, -17.5445617], [-149.775501, -17.5437183], [-149.7749006, -17.5420475], [-149.7751673, -17.5405785], [-149.7738885, -17.5395521], [-149.7738049, -17.5380378], [-149.7734252, -17.5353471], [-149.7729266, -17.533363], [-149.7730434, -17.531472], [-149.7741716, -17.5294245], [-149.7756064, -17.5266974], [-149.7762375, -17.5228859], [-149.7772513, -17.5228257], [-149.7768721, -17.524071], [-149.7781945, -17.523933], [-149.7793909, -17.523967], [-149.7810878, -17.5222477], [-149.781415, -17.5204111], [-149.7773314, -17.5197937], [-149.7752825, -17.5198464], [-149.7736808, -17.5188258], [-149.7719367, -17.5177479], [-149.7711754, -17.5166174], [-149.7709033, -17.5151016], [-149.769242, -17.5141594], [-149.7688016, -17.5119962], [-149.7694985, -17.5113435], [-149.7689715, -17.5093789], [-149.7689362, -17.5083215], [-149.7684501, -17.506976], [-149.7671975, -17.5063737], [-149.7665759, -17.5049597], [-149.7661154, -17.5035495], [-149.7653709, -17.5025538], [-149.7646957, -17.5011253], [-149.7615373, -17.4986633], [-149.756435, -17.4974923], [-149.7549647, -17.4979552], [-149.7529744, -17.495441], [-149.753626, -17.4921433], [-149.7559126, -17.4909155], [-149.7581628, -17.4898935], [-149.7598269, -17.4891844], [-149.7615784, -17.4880211], [-149.7632311, -17.4865814], [-149.7645194, -17.4843498], [-149.7655328, -17.481323], [-149.7677229, -17.4776828], [-149.7687622, -17.4767838], [-149.7696581, -17.4762005], [-149.7707001, -17.4755315], [-149.7719901, -17.4748122], [-149.7731583, -17.4740276], [-149.7742896, -17.4735317], [-149.7756753, -17.4732808], [-149.7751258, -17.4734141], [-149.775977, -17.4739428], [-149.7785237, -17.4759258], [-149.7808532, -17.4767725], [-149.7830409, -17.4770767], [-149.7850039, -17.4780317], [-149.7871252, -17.4781913], [-149.7887795, -17.4787319], [-149.7911695, -17.4794225], [-149.793325, -17.4801522], [-149.7952308, -17.480485], [-149.7967327, -17.4804075], [-149.7985242, -17.4808956], [-149.8004362, -17.481151], [-149.8017432, -17.4809557], [-149.8028366, -17.4804718], [-149.8042489, -17.4806402], [-149.8049802, -17.4814322], [-149.8062491, -17.4812989], [-149.8080199, -17.4810339], [-149.8097342, -17.4813239], [-149.8103069, -17.4825068], [-149.8115465, -17.4831503], [-149.813224, -17.4833246], [-149.8151147, -17.4835595], [-149.8163221, -17.4839912], [-149.8170001, -17.4854283], [-149.8173027, -17.4868052], [-149.8181211, -17.4880279], [-149.8184065, -17.4901121], [-149.8177069, -17.4915575], [-149.8174241, -17.4927204], [-149.8179391, -17.4943934], [-149.8172605, -17.4960451], [-149.817286, -17.4984356], [-149.8176263, -17.5000193], [-149.81685, -17.5021613], [-149.8189922, -17.5052586], [-149.8201974, -17.5069695], [-149.8223384, -17.5065657], [-149.8238432, -17.504717], [-149.8235046, -17.5009341], [-149.8234858, -17.4996675], [-149.8244002, -17.4983473], [-149.8250967, -17.4966903], [-149.8257223, -17.4939264], [-149.8263767, -17.4911373], [-149.8262997, -17.4883025], [-149.8277995, -17.485994], [-149.8289696, -17.4850136], [-149.8305272, -17.4851528], [-149.8320196, -17.4859581], [-149.8343545, -17.4857229], [-149.8360336, -17.4851072], [-149.8378651, -17.4849396], [-149.8398044, -17.4847778], [-149.8417808, -17.4847915], [-149.8435539, -17.4846211], [-149.8452123, -17.4849522], [-149.8471578, -17.4864531], [-149.8479972, -17.4879895], [-149.8486647, -17.4891219], [-149.8499811, -17.4906192], [-149.8508462, -17.493031], [-149.8518414, -17.4959744], [-149.8530049, -17.4986835], [-149.8539674, -17.5006453], [-149.8534171, -17.5020027], [-149.8529857, -17.5037229], [-149.8529064, -17.5053864], [-149.8521423, -17.5073373], [-149.8520443, -17.5088108], [-149.8506074, -17.5112507], [-149.8494939, -17.5139338], [-149.8501104, -17.5170525], [-149.8525308, -17.5174693], [-149.8540331, -17.516586], [-149.8547799, -17.5147124], [-149.8559188, -17.5127005], [-149.8571279, -17.5107431], [-149.8586373, -17.5099282], [-149.8582726, -17.507368], [-149.8589511, -17.5051411], [-149.8603539, -17.5025057], [-149.8622397, -17.4999136], [-149.8630074, -17.4986568], [-149.8655045, -17.4960863], [-149.8671835, -17.4949679], [-149.8683349, -17.4939094], [-149.8696854, -17.4926606], [-149.8719193, -17.4919147], [-149.8738163, -17.4922477], [-149.8751065, -17.4921982], [-149.8765915, -17.4913589], [-149.8775068, -17.4922461], [-149.8766463, -17.4934806], [-149.8776077, -17.493967], [-149.8795255, -17.493458], [-149.8803835, -17.4922214], [-149.8828256, -17.491454], [-149.884361, -17.4913929], [-149.8857413, -17.4909379], [-149.8876052, -17.4909751], [-149.8885294, -17.4908823], [-149.8900155, -17.4918286], [-149.8909423, -17.4919205], [-149.890732, -17.4917631], [-149.8915388, -17.4907617], [-149.8946414, -17.4897174], [-149.8959823, -17.4913846], [-149.8976018, -17.4929165], [-149.8955687, -17.4924177], [-149.8978364, -17.4932129], [-149.8988942, -17.4930224], [-149.8992438, -17.4915217], [-149.9010207, -17.4912783], [-149.9035495, -17.4906641], [-149.9061729, -17.4907318], [-149.9083765, -17.4906139], [-149.90844, -17.4918157], [-149.9094981, -17.4922895], [-149.912874, -17.4928635], [-149.914394, -17.4965086], [-149.9153378, -17.4989018], [-149.9155159, -17.4999802], [-149.9157286, -17.5018622], [-149.9159383, -17.5033716]]]}};

            // Call drawMap directly with embedded data
            drawMap(moorea);

            function drawMap(moorea) {
                // Extract coordinates from GeoJSON
                const coords = moorea.geometry.coordinates[0];

                // Calculate geographic bounds
                const lons = coords.map(c => c[0]);
                const lats = coords.map(c => c[1]);
                const lonMin = Math.min(...lons), lonMax = Math.max(...lons);
                const latMin = Math.min(...lats), latMax = Math.max(...lats);

                // Create manual projection (simple equirectangular with aspect ratio correction)
                const padding = 60;
                const availableWidth = width - 2 * padding;
                const availableHeight = height - 2 * padding;

                // Scale to fit, maintaining aspect ratio
                const lonRange = lonMax - lonMin;
                const latRange = latMax - latMin;
                const scaleX = availableWidth / lonRange;
                const scaleY = availableHeight / latRange;
                const scale = Math.min(scaleX, scaleY);

                // Center the island
                const offsetX = padding + (availableWidth - lonRange * scale) / 2;
                const offsetY = padding + (availableHeight - latRange * scale) / 2;

                // Custom projection function
                const projection = function(coord) {
                    const x = offsetX + (coord[0] - lonMin) * scale;
                    const y = offsetY + (latMax - coord[1]) * scale;  // Flip Y axis
                    return [x, y];
                };

                // Create path string from coordinates
                const islandPoints = coords.map(c => projection(c));
                const islandPathD = 'M' + islandPoints.map(p => p[0].toFixed(2) + ',' + p[1].toFixed(2)).join('L') + 'Z';

                // Calculate island bounds for reef ellipse
                const projectedBounds = {
                    minX: Math.min(...islandPoints.map(p => p[0])),
                    maxX: Math.max(...islandPoints.map(p => p[0])),
                    minY: Math.min(...islandPoints.map(p => p[1])),
                    maxY: Math.max(...islandPoints.map(p => p[1]))
                };

                // Calculate centroid
                const centroidX = (projectedBounds.minX + projectedBounds.maxX) / 2;
                const centroidY = (projectedBounds.minY + projectedBounds.maxY) / 2;

                // Island gradient
                const islandGradient = svg.append('defs')
                    .append('radialGradient')
                    .attr('id', 'islandGradient')
                    .attr('cx', '30%')
                    .attr('cy', '30%');

                islandGradient.append('stop')
                    .attr('offset', '0%')
                    .attr('stop-color', '#3d7a4d');
                islandGradient.append('stop')
                    .attr('offset', '60%')
                    .attr('stop-color', '#2a5a3a');
                islandGradient.append('stop')
                    .attr('offset', '100%')
                    .attr('stop-color', '#1a3a2a');

                // Add drop shadow filter
                const defs = svg.select('defs');
                const filter = defs.append('filter')
                    .attr('id', 'island-shadow')
                    .attr('x', '-20%')
                    .attr('y', '-20%')
                    .attr('width', '140%')
                    .attr('height', '140%');

                filter.append('feDropShadow')
                    .attr('dx', 3)
                    .attr('dy', 3)
                    .attr('stdDeviation', 5)
                    .attr('flood-color', 'rgba(0,0,0,0.4)');

                // Draw ocean background
                svg.append('rect')
                    .attr('x', 0)
                    .attr('y', 0)
                    .attr('width', width)
                    .attr('height', height)
                    .attr('fill', 'rgba(10, 22, 40, 0.3)')
                    .attr('rx', 12);

                // Draw reef/lagoon area (ellipse around island)
                svg.append('ellipse')
                    .attr('cx', centroidX)
                    .attr('cy', centroidY)
                    .attr('rx', (projectedBounds.maxX - projectedBounds.minX) / 2 + 50)
                    .attr('ry', (projectedBounds.maxY - projectedBounds.minY) / 2 + 50)
                    .attr('fill', 'rgba(0, 187, 249, 0.12)')
                    .attr('stroke', 'rgba(0, 187, 249, 0.25)')
                    .attr('stroke-width', 2)
                    .attr('stroke-dasharray', '5,5');

                // Draw the actual Mo'orea island using manual path
                svg.append('path')
                    .attr('d', islandPathD)
                    .attr('fill', 'url(#islandGradient)')
                    .attr('stroke', '#4a9a5a')
                    .attr('stroke-width', 2)
                    .attr('filter', 'url(#island-shadow)');

                // Add island label
                svg.append('text')
                    .attr('x', centroidX)
                    .attr('y', centroidY)
                    .attr('text-anchor', 'middle')
                    .attr('fill', 'rgba(255, 255, 255, 0.5)')
                    .attr('font-size', '16px')
                    .attr('font-family', 'Playfair Display, serif')
                    .attr('font-style', 'italic')
                    .text("Mo'orea");

                // Add "OpenStreetMap" attribution
                svg.append('text')
                    .attr('x', width - 10)
                    .attr('y', height - 10)
                    .attr('text-anchor', 'end')
                    .attr('fill', 'rgba(255, 255, 255, 0.3)')
                    .attr('font-size', '9px')
                    .text(' OpenStreetMap contributors');

                // Add compass rose
                const compassX = width - 50;
                const compassY = 50;

                svg.append('circle')
                    .attr('cx', compassX)
                    .attr('cy', compassY)
                    .attr('r', 22)
                    .attr('fill', 'rgba(10, 22, 40, 0.6)')
                    .attr('stroke', 'rgba(255, 255, 255, 0.3)')
                    .attr('stroke-width', 1);

                svg.append('text')
                    .attr('x', compassX)
                    .attr('y', compassY - 28)
                    .attr('text-anchor', 'middle')
                    .attr('fill', 'var(--biolum-cyan)')
                    .attr('font-size', '11px')
                    .attr('font-weight', '600')
                    .text('N');

                // Compass arrow
                svg.append('polygon')
                    .attr('points', `${compassX},${compassY-18} ${compassX-5},${compassY} ${compassX+5},${compassY}`)
                    .attr('fill', 'var(--biolum-cyan)');
                svg.append('polygon')
                    .attr('points', `${compassX},${compassY+18} ${compassX-5},${compassY} ${compassX+5},${compassY}`)
                    .attr('fill', 'rgba(255, 255, 255, 0.3)');

                // Add scale bar
                const scaleBarX = 30;
                const scaleBarY = height - 30;

                // Calculate actual scale (approximate)
                const [x1, y1] = projection([-149.85, -17.53]);
                const [x2, y2] = projection([-149.80, -17.53]);
                const pixelsPerDegree = x2 - x1;
                const kmPerDegLon = 111 * Math.cos(-17.53 * Math.PI / 180) * 0.05; // ~5km at this latitude for 0.05 degrees
                const scaleLength = pixelsPerDegree;

                svg.append('line')
                    .attr('x1', scaleBarX)
                    .attr('y1', scaleBarY)
                    .attr('x2', scaleBarX + 60)
                    .attr('y2', scaleBarY)
                    .attr('stroke', 'rgba(255, 255, 255, 0.6)')
                    .attr('stroke-width', 2);

                // End caps
                svg.append('line')
                    .attr('x1', scaleBarX)
                    .attr('y1', scaleBarY - 5)
                    .attr('x2', scaleBarX)
                    .attr('y2', scaleBarY + 5)
                    .attr('stroke', 'rgba(255, 255, 255, 0.6)')
                    .attr('stroke-width', 2);

                svg.append('line')
                    .attr('x1', scaleBarX + 60)
                    .attr('y1', scaleBarY - 5)
                    .attr('x2', scaleBarX + 60)
                    .attr('y2', scaleBarY + 5)
                    .attr('stroke', 'rgba(255, 255, 255, 0.6)')
                    .attr('stroke-width', 2);

                svg.append('text')
                    .attr('x', scaleBarX + 30)
                    .attr('y', scaleBarY - 10)
                    .attr('text-anchor', 'middle')
                    .attr('fill', 'rgba(255, 255, 255, 0.6)')
                    .attr('font-size', '10px')
                    .text('~5 km');

                // Draw study sites with pulsing animation
                sites.forEach((site, i) => {
                    const [x, y] = projection([site.lon, site.lat]);

                    // Pulsing ring animation
                    const pulseRing = svg.append('circle')
                        .attr('cx', x)
                        .attr('cy', y)
                        .attr('r', 8)
                        .attr('fill', 'none')
                        .attr('stroke', site.color)
                        .attr('stroke-width', 2)
                        .attr('opacity', 0);

                    // Animate pulse
                    function pulse() {
                        pulseRing
                            .attr('r', 8)
                            .attr('opacity', 0.8)
                            .transition()
                            .duration(1500)
                            .attr('r', 30)
                            .attr('opacity', 0)
                            .on('end', pulse);
                    }
                    setTimeout(pulse, i * 500);

                    // Main marker
                    const marker = svg.append('circle')
                        .attr('cx', x)
                        .attr('cy', y)
                        .attr('r', 12)
                        .attr('fill', site.color)
                        .attr('stroke', '#fff')
                        .attr('stroke-width', 2.5)
                        .attr('cursor', 'pointer')
                        .attr('filter', 'drop-shadow(0 2px 4px rgba(0,0,0,0.4))');

                    // Inner dot
                    svg.append('circle')
                        .attr('cx', x)
                        .attr('cy', y)
                        .attr('r', 4)
                        .attr('fill', '#fff')
                        .attr('pointer-events', 'none');

                    // Interactions
                    marker.on('mouseover', function(event) {
                        d3.select(this)
                            .transition()
                            .duration(200)
                            .attr('r', 16);

                        tooltip
                            .style('opacity', 1)
                            .style('left', (x + 25) + 'px')
                            .style('top', (y - 10) + 'px')
                            .html(`
                                <strong style="color: ${site.color}; font-size: 1.1em;">${site.name}</strong><br>
                                <span style="color: var(--text-muted);">Study:</span> ${site.study}<br>
                                <span style="color: var(--text-muted);">Colonies:</span> ${site.colonies}<br>
                                <span style="color: var(--text-muted);">Depth:</span> ${site.depth}<br>
                                <span style="color: var(--text-muted);">Coords:</span> ${Math.abs(site.lat).toFixed(4)}S, ${Math.abs(site.lon).toFixed(4)}W
                            `);
                    })
                    .on('mouseout', function() {
                        d3.select(this)
                            .transition()
                            .duration(200)
                            .attr('r', 12);

                        tooltip.style('opacity', 0);
                    });
                });

                // Legend
                const legendX = 30;
                const legendY = 30;

                // Legend background
                svg.append('rect')
                    .attr('x', legendX - 10)
                    .attr('y', legendY - 15)
                    .attr('width', 140)
                    .attr('height', 90)
                    .attr('fill', 'rgba(10, 22, 40, 0.7)')
                    .attr('rx', 8)
                    .attr('stroke', 'rgba(255, 255, 255, 0.1)')
                    .attr('stroke-width', 1);

                svg.append('text')
                    .attr('x', legendX)
                    .attr('y', legendY)
                    .attr('fill', 'var(--foam-white)')
                    .attr('font-size', '11px')
                    .attr('font-weight', '600')
                    .text('Study Sites');

                sites.forEach((site, i) => {
                    const itemY = legendY + 20 + i * 22;

                    svg.append('circle')
                        .attr('cx', legendX + 6)
                        .attr('cy', itemY)
                        .attr('r', 6)
                        .attr('fill', site.color);

                    svg.append('text')
                        .attr('x', legendX + 18)
                        .attr('y', itemY + 4)
                        .attr('fill', 'var(--text-light)')
                        .attr('font-size', '11px')
                        .text(site.name.split(' - ')[0]);
                });
            }

        }

        // ============================================
        // Study Bar Chart
        // ============================================
        function initStudyBarChart() {
            const container = document.getElementById('study-chart');
            if (!container) return;

            const svg = d3.select('#study-bar-chart');
            const margin = {top: 30, right: 30, bottom: 60, left: 80};
            const containerWidth = container.clientWidth || 600;
            const width = Math.max(containerWidth - 64 - margin.left - margin.right, 300);
            const height = 300 - margin.top - margin.bottom;

            svg.attr('width', width + margin.left + margin.right)
               .attr('height', height + margin.top + margin.bottom);

            const g = svg.append('g')
                .attr('transform', `translate(${margin.left},${margin.top})`);

            // Data from the dataset
            const data = [
                { study: 'MRB Amount', cafi: 5234, colonies: 54, color: '#00f5d4' },
                { study: 'Maatea Size', cafi: 4891, colonies: 60, color: '#ff6b8a' },
                { study: 'Mo\'orea Survey', cafi: 6948, colonies: 114, color: '#00bbf9' }
            ];

            // Scales
            const x = d3.scaleBand()
                .domain(data.map(d => d.study))
                .range([0, width])
                .padding(0.3);

            const y = d3.scaleLinear()
                .domain([0, d3.max(data, d => d.cafi) * 1.1])
                .range([height, 0]);

            // Add grid lines
            g.append('g')
                .attr('class', 'grid')
                .call(d3.axisLeft(y)
                    .tickSize(-width)
                    .tickFormat('')
                )
                .selectAll('line')
                .attr('stroke', 'rgba(255, 255, 255, 0.1)');

            g.select('.grid .domain').remove();

            // Add X axis
            g.append('g')
                .attr('transform', `translate(0,${height})`)
                .call(d3.axisBottom(x))
                .selectAll('text')
                .attr('fill', 'var(--text-light)')
                .attr('font-size', '12px');

            g.selectAll('.domain, .tick line')
                .attr('stroke', 'rgba(255, 255, 255, 0.3)');

            // Add Y axis
            g.append('g')
                .call(d3.axisLeft(y).tickFormat(d => d.toLocaleString()))
                .selectAll('text')
                .attr('fill', 'var(--text-muted)')
                .attr('font-size', '11px');

            // Y axis label
            g.append('text')
                .attr('transform', 'rotate(-90)')
                .attr('y', -60)
                .attr('x', -height / 2)
                .attr('fill', 'var(--text-muted)')
                .attr('text-anchor', 'middle')
                .attr('font-size', '12px')
                .text('CAFI Organisms');

            // Add bars with animation
            const bars = g.selectAll('.bar')
                .data(data)
                .enter()
                .append('rect')
                .attr('class', 'bar')
                .attr('x', d => x(d.study))
                .attr('width', x.bandwidth())
                .attr('y', height)
                .attr('height', 0)
                .attr('fill', d => d.color)
                .attr('rx', 4)
                .attr('opacity', 0.85);

            // Animate bars on scroll
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        bars.transition()
                            .duration(1000)
                            .delay((d, i) => i * 200)
                            .attr('y', d => y(d.cafi))
                            .attr('height', d => height - y(d.cafi));
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.3 });

            observer.observe(container);

            // Add value labels
            g.selectAll('.label')
                .data(data)
                .enter()
                .append('text')
                .attr('class', 'label')
                .attr('x', d => x(d.study) + x.bandwidth() / 2)
                .attr('y', d => y(d.cafi) - 8)
                .attr('text-anchor', 'middle')
                .attr('fill', d => d.color)
                .attr('font-size', '14px')
                .attr('font-weight', '600')
                .attr('opacity', 0)
                .text(d => d.cafi.toLocaleString())
                .transition()
                .delay((d, i) => 1000 + i * 200)
                .duration(500)
                .attr('opacity', 1);

            // Add colony count below bars
            g.selectAll('.colony-label')
                .data(data)
                .enter()
                .append('text')
                .attr('x', d => x(d.study) + x.bandwidth() / 2)
                .attr('y', height + 35)
                .attr('text-anchor', 'middle')
                .attr('fill', 'var(--text-muted)')
                .attr('font-size', '11px')
                .text(d => `${d.colonies} colonies`);
        }

        // ============================================
        // Taxonomic Pie Chart
        // ============================================
        function initTaxaPieChart() {
            const container = document.getElementById('taxa-pie-container');
            if (!container) return;

            const svg = d3.select('#taxa-pie-chart');
            const width = 300;
            const height = 300;
            const radius = Math.min(width, height) / 2 - 20;

            svg.attr('width', width).attr('height', height);

            const g = svg.append('g')
                .attr('transform', `translate(${width/2},${height/2})`);

            // Taxonomic data (approximate from dataset)
            const data = [
                { group: 'Decapoda', count: 8542, color: '#00f5d4' },
                { group: 'Polychaeta', count: 4265, color: '#ff6b8a' },
                { group: 'Gastropoda', count: 2135, color: '#00bbf9' },
                { group: 'Ophiuroidea', count: 1284, color: '#ff8c42' },
                { group: 'Other', count: 847, color: '#8ba3b9' }
            ];

            const total = d3.sum(data, d => d.count);

            const pie = d3.pie()
                .value(d => d.count)
                .sort(null)
                .padAngle(0.02);

            const arc = d3.arc()
                .innerRadius(radius * 0.5)
                .outerRadius(radius);

            const hoverArc = d3.arc()
                .innerRadius(radius * 0.5)
                .outerRadius(radius + 10);

            // Create arcs
            const arcs = g.selectAll('.arc')
                .data(pie(data))
                .enter()
                .append('g')
                .attr('class', 'arc');

            arcs.append('path')
                .attr('d', arc)
                .attr('fill', d => d.data.color)
                .attr('stroke', 'var(--ocean-deep)')
                .attr('stroke-width', 2)
                .attr('opacity', 0.9)
                .style('cursor', 'pointer')
                .on('mouseover', function(event, d) {
                    d3.select(this)
                        .transition()
                        .duration(200)
                        .attr('d', hoverArc)
                        .attr('opacity', 1);

                    // Update center text
                    centerText.text(d.data.group);
                    centerValue.text(`${((d.data.count / total) * 100).toFixed(1)}%`);
                })
                .on('mouseout', function() {
                    d3.select(this)
                        .transition()
                        .duration(200)
                        .attr('d', arc)
                        .attr('opacity', 0.9);

                    centerText.text('Total');
                    centerValue.text(total.toLocaleString());
                });

            // Center text
            const centerText = g.append('text')
                .attr('text-anchor', 'middle')
                .attr('y', -8)
                .attr('fill', 'var(--text-muted)')
                .attr('font-size', '12px')
                .text('Total');

            const centerValue = g.append('text')
                .attr('text-anchor', 'middle')
                .attr('y', 15)
                .attr('fill', 'var(--text-light)')
                .attr('font-size', '20px')
                .attr('font-weight', '600')
                .text(total.toLocaleString());

            // Legend
            const legend = svg.append('g')
                .attr('transform', `translate(${width - 100}, 30)`);

            data.forEach((d, i) => {
                const legendRow = legend.append('g')
                    .attr('transform', `translate(0, ${i * 22})`);

                legendRow.append('rect')
                    .attr('width', 12)
                    .attr('height', 12)
                    .attr('rx', 2)
                    .attr('fill', d.color);

                legendRow.append('text')
                    .attr('x', 18)
                    .attr('y', 10)
                    .attr('fill', 'var(--text-light)')
                    .attr('font-size', '11px')
                    .text(d.group);
            });
        }

        // ============================================
        // Timeline Chart
        // ============================================
        function initTimelineChart() {
            const container = document.getElementById('timeline-container');
            if (!container) return;

            const svg = d3.select('#timeline-chart');
            const margin = {top: 20, right: 30, bottom: 50, left: 50};
            const width = 300 - margin.left - margin.right;
            const height = 300 - margin.top - margin.bottom;

            svg.attr('width', width + margin.left + margin.right)
               .attr('height', height + margin.top + margin.bottom);

            const g = svg.append('g')
                .attr('transform', `translate(${margin.left},${margin.top})`);

            // Timeline events
            const events = [
                { date: new Date('2019-06-01'), event: 'Survey', type: 'survey', y: 0.8 },
                { date: new Date('2019-12-01'), event: 'Experiments Start', type: 'start', y: 0.5 },
                { date: new Date('2020-06-01'), event: 'Mid-study', type: 'mid', y: 0.3 },
                { date: new Date('2021-05-01'), event: 'Final Sampling', type: 'end', y: 0.6 }
            ];

            // Scales
            const x = d3.scaleTime()
                .domain([new Date('2019-01-01'), new Date('2021-12-01')])
                .range([0, width]);

            const y = d3.scaleLinear()
                .domain([0, 1])
                .range([height, 0]);

            // Add time axis
            g.append('g')
                .attr('transform', `translate(0,${height})`)
                .call(d3.axisBottom(x)
                    .ticks(6)
                    .tickFormat(d3.timeFormat('%b %Y')))
                .selectAll('text')
                .attr('fill', 'var(--text-muted)')
                .attr('font-size', '10px')
                .attr('transform', 'rotate(-30)')
                .attr('text-anchor', 'end');

            g.selectAll('.domain, .tick line')
                .attr('stroke', 'rgba(255, 255, 255, 0.3)');

            // Timeline line
            g.append('line')
                .attr('x1', 0)
                .attr('y1', height / 2)
                .attr('x2', width)
                .attr('y2', height / 2)
                .attr('stroke', 'rgba(0, 245, 212, 0.3)')
                .attr('stroke-width', 2)
                .attr('stroke-dasharray', '5,5');

            // Event markers
            const colors = {
                'survey': '#00bbf9',
                'start': '#00f5d4',
                'mid': '#ff8c42',
                'end': '#ff6b8a'
            };

            events.forEach((event, i) => {
                const cx = x(event.date);
                const cy = y(event.y);

                // Connector line to timeline
                g.append('line')
                    .attr('x1', cx)
                    .attr('y1', cy)
                    .attr('x2', cx)
                    .attr('y2', height / 2)
                    .attr('stroke', colors[event.type])
                    .attr('stroke-width', 1)
                    .attr('stroke-dasharray', '3,3')
                    .attr('opacity', 0.5);

                // Event circle
                g.append('circle')
                    .attr('cx', cx)
                    .attr('cy', cy)
                    .attr('r', 8)
                    .attr('fill', colors[event.type])
                    .attr('stroke', '#fff')
                    .attr('stroke-width', 2);

                // Event label
                g.append('text')
                    .attr('x', cx)
                    .attr('y', cy - 15)
                    .attr('text-anchor', 'middle')
                    .attr('fill', colors[event.type])
                    .attr('font-size', '10px')
                    .attr('font-weight', '500')
                    .text(event.event);
            });

            // Study period brackets
            const studyPeriods = [
                { name: 'Survey', start: new Date('2019-06-01'), end: new Date('2019-08-01'), y: height * 0.1, color: '#00bbf9' },
                { name: 'MRB', start: new Date('2019-12-01'), end: new Date('2021-05-01'), y: height * 0.25, color: '#00f5d4' },
                { name: 'Maatea', start: new Date('2019-12-01'), end: new Date('2021-05-01'), y: height * 0.4, color: '#ff6b8a' }
            ];

            studyPeriods.forEach(period => {
                g.append('rect')
                    .attr('x', x(period.start))
                    .attr('y', period.y)
                    .attr('width', x(period.end) - x(period.start))
                    .attr('height', 16)
                    .attr('fill', period.color)
                    .attr('opacity', 0.2)
                    .attr('rx', 3);

                g.append('text')
                    .attr('x', x(period.start) + 5)
                    .attr('y', period.y + 12)
                    .attr('fill', period.color)
                    .attr('font-size', '9px')
                    .attr('font-weight', '500')
                    .text(period.name);
            });
        }
    </script>
</body>
</html>
